import './polyfills.server.mjs';
import{a as Q}from"./chunk-KANI3V3N.mjs";import{a as K}from"./chunk-B36I7J6D.mjs";import"./chunk-B22Y7IUL.mjs";import{a as J}from"./chunk-ZB5EWPKT.mjs";import"./chunk-J55PHKJ5.mjs";import{a as z}from"./chunk-4MMMLTFU.mjs";import{a as P}from"./chunk-WSQWBVCP.mjs";import"./chunk-GLNDTVHY.mjs";import{$d as w,Cc as M,Ec as y,Fa as i,Fc as F,Ga as r,Ha as v,Hd as k,Id as x,Jd as E,Kb as b,Ld as _,Ma as m,Md as B,Me as W,Nd as j,Od as G,Pe as L,Qe as H,Va as a,Zd as O,ae as A,ec as h,ga as d,hc as N,ie as V,ka as n,kc as S,lc as T,na as u,nc as C,oc as D,qa as c,sc as R,ue as q,vc as g,ve as U,ya as f,yc as I}from"./chunk-S35L2QCG.mjs";import{a as l}from"./chunk-VT4PU2RR.mjs";var X=class s extends J{constructor(e,t,o,p,$,Y,ee){super(e,t,Y);this.fb=o;this.tenantRepository=p;this.router=$;this.activatedRoute=ee}tenantForm;ngOnInit(){this.tenantForm=this.fb.group({id:[""],name:[""],domain:[""],active:[!0]}),this.loadTenantData()}loadTenantData(){let e=this.activatedRoute.snapshot.paramMap.get("id");if(e&&K.isValidObjectId(e)){let t={id:e,name:"",domain:"",active:!0};this.spinnerService.show(),this.tenantRepository.listTenants(t).subscribe({next:o=>{let p=o.length>0?o[0]:null;p?this.tenantForm.patchValue(p):console.warn("Tenant no encontrado"),this.spinnerService.hide()},error:()=>{this.spinnerService.hide(),this.handleErrorResponseSaveOrUpdate("Error al cargar el Tenant")}})}}saveTenant(){let e=l({},this.tenantForm.value);this.tenantRepository.saveTenant(e).subscribe({next:()=>{this.showSuccessMessage("Tenant guardado correctamente","\xC9xito"),this.router.navigate(["/support/tenant"])},error:()=>{this.handleErrorResponseSaveOrUpdate("Error al guardar Tenant")}})}returnToList(){this.router.navigate(["/support/tenant"])}static \u0275fac=function(t){return new(t||s)(n(P),n(z),n(M),n(Q),n(N),n(V),n(h))};static \u0275cmp=u({type:s,selectors:[["app-support-tenant-detail"]],features:[c],decls:18,vars:1,consts:[[3,"formGroup"],[1,"form-grid"],["nbInput","","fullWidth","","placeholder","ID","formControlName","id","readonly",""],["nbInput","","fullWidth","","placeholder","Nombre","formControlName","name"],["nbInput","","fullWidth","","placeholder","Dominio","formControlName","domain"],["formControlName","active"],[1,"button-container"],["nbButton","","status","primary",3,"click"],["nbButton","","status","danger",3,"click"]],template:function(t,o){t&1&&(i(0,"p"),a(1,"support-tenant-detail works!"),r(),i(2,"nb-card")(3,"nb-card-header"),a(4,"Tenant Detail"),r(),i(5,"nb-card-body")(6,"form",0)(7,"div",1),v(8,"input",2)(9,"input",3)(10,"input",4),r(),i(11,"nb-checkbox",5),a(12,"Activo"),r(),i(13,"div",6)(14,"button",7),m("click",function(){return o.saveTenant()}),a(15,"Guardar"),r(),i(16,"button",8),m("click",function(){return o.returnToList()}),a(17,"Volver"),r()()()()()),t&2&&(d(6),f("formGroup",o.tenantForm))},dependencies:[b,S,G,j,B,_,E,x,A,w,k,H,O,R,T,C,D,g,I,F,y,U,q,W,L],encapsulation:2})};export{X as SupportTenantDetailComponent};
