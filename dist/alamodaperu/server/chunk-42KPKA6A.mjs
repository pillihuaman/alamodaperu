import './polyfills.server.mjs';
import{a as oe}from"./chunk-3JBG2532.mjs";import{a as re}from"./chunk-YLUJOFQ6.mjs";import"./chunk-RMFMLZ2X.mjs";import"./chunk-FUVFZO2C.mjs";import"./chunk-2CRQO2D4.mjs";import{a as ne}from"./chunk-LLKJYFRT.mjs";import{j as ie}from"./chunk-ZUFXFZKB.mjs";import{Aa as u,Bb as h,Bd as X,Ce as te,Fa as f,I as _,Id as J,Ka as D,La as F,Ma as S,Oa as m,Od as K,Qa as B,Xd as Y,Y as M,_ as p,aa as N,ae as Z,bc as C,be as ee,ca as x,da as s,ec as j,fa as k,fc as V,ga as d,ia as E,ja as O,jc as z,ka as w,lc as L,nc as A,ra as c,tc as G,ud as y,vb as T,vc as U,vd as q,wc as Q,wd as $,ya as o,yd as W,za as i,zd as H}from"./chunk-XCJYKJAR.mjs";import"./chunk-S6KH3LOX.mjs";var v=class n{lstLabel;lstButton;ngOnInit(){}static \u0275fac=function(e){return new(e||n)};static \u0275dir=E({type:n})};var I=class n{fileInput;img;componentDynamic;constructor(){}ngOnInit(){this.fileInput&&this.renderImagen(this.fileInput)}close(a){}removeView(){}renderImagen(a){let e=a.target.files[0],t=new FileReader;t.onload=()=>{this.img=t.result},t.readAsDataURL(e)}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=d({type:n,selectors:[["app-dynamic"]],inputs:{fileInput:"fileInput"},decls:4,vars:1,consts:[[1,"border"],[1,"buttonClose",3,"click"],[1,"tempImagen",3,"src"]],template:function(e,t){e&1&&(o(0,"div",0)(1,"label",1),f("click",function(){return t.close(1)}),m(2,"X"),i(),u(3,"img",2),i()),e&2&&(p(3),c("src",t.img,M))},styles:[".tempImagen[_ngcontent-%COMP%]{width:45%;max-height:70%}.buttonCloseMain[_ngcontent-%COMP%]{font-size:x-large;position:relative;padding:12px}.buttonClose[_ngcontent-%COMP%]{font-size:x-large;position:absolute;top:0%;left:60%;color:red;padding:12px}.border[_ngcontent-%COMP%]{padding:12px;align-items:center;text-align:center}"]})};var b=class n{placeholder;constructor(){}ngOnInit(){}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=d({type:n,selectors:[["app-date-picker"]],inputs:{placeholder:"placeholder"},decls:0,vars:0,template:function(e,t){},dependencies:[h,C,J,y],encapsulation:2,changeDetection:0})};var P=class{};var ce=["inputFile"],pe=["container"];function de(n,a){if(n&1&&(o(0,"nb-option",10),m(1),i()),n&2){let e=a.$implicit;c("value",e.idProduct),p(),B(" ",e.name," ")}}var le=class n extends v{constructor(e,t,r,l,g,ue,fe,ge){super();this.renderer=e;this.imagenTempService=t;this.fb=r;this.dataService=l;this.localservice=g;this.authenticationService=ue;this.componentFactoryResolver=fe;this.injector=ge;this.myForm=this.fb.group({img:[null],filename:[""],name:[""],description:[""],idProduct:[""],barCode:[""],count:[""],expirationDate:[""]}),this.lstButton,this.dataService.getData().subscribe(me=>{this.lstControl=me}),console.log(this.localservice.getLanguageCode()),console.log(this.lstControl)}listProductByUser=[];listImagenTemp=[{urlImagen:"http://localhost:8087/v1/imagen/getImagen?codImagen=6342acc01413e6298e29ef98"}];imgPrincipal;idTempUnique="";imagenTem;uuidValue;count=0;base64File;selectImagen;listFilePath=[];filePath1;filePath2;filePath3;filePath4;img1;img2;img3;img4;myForm;lstfilePath=[];idProductSelect;lstBarCode;register="Register";typeButton="typeButton";btn="btn btn-primary";truus=!0;lstControl;myDate;datepicker;locale;customColumnInput="ID Product";defaultColumnsInput=["Count","Bar Code","Creation Date","Expiration Date"];datas=[];inputFile={};img;container;ngOnInit(){if(!this.authenticationService.getCurrentUserValue?.id_user){console.error("No user ID found.");return}}createCOmponent(){this.container?.clear;let t=this.componentFactoryResolver.resolveComponentFactory(I).create(this.injector);t.instance.fileInput=this.imgPrincipal,t.changeDetectorRef.detectChanges(),this.container?.insert(t.hostView)}loadFile(e){this.count++;let t=e.target.files;this.selectImagen=e.target.files[0],this.imgPrincipal=e;let r={file:this.selectImagen};this.myForm?.patchValue({img:t}),this.myForm?.get("img")?.updateValueAndValidity();let l=new FileReader;l.onload=()=>{this.filePath1=l.result,this.listFilePath?.push(this.filePath1),this.img1={name:this.selectImagen?.name,value:this.filePath1,index:0}},l.readAsDataURL(this.selectImagen),this.createCOmponent(),this.listFilePath?.forEach(g=>{console.log(g.length)})}getCatalog(){if(this.listFilePath?.length&&this.listFilePath?.length>0){let e=0;this.listFilePath.forEach(t=>(e++,`
          <div>
            <img src="${t}" alt="Image"${e}">
          </div>
        `))}return""}close(e){e===1?this.filePath1=void 0:e===2&&(this.filePath2=void 0),e===3&&(this.filePath3=void 0),e===4&&(this.filePath4=void 0),this.inputFile.nativeElement.value=null}save(){if(this.lstfilePath=[],this.filePath1&&this.filePath1!==""&&(this.lstfilePath?.push(this.img1),console.log(this.img1)),this.filePath2&&this.filePath2!==""&&this.lstfilePath?.push(this.img2),this.filePath3&&this.filePath3!==""&&this.lstfilePath?.push(this.img3),this.filePath4&&this.filePath4!==""&&this.lstfilePath?.push(this.img4),this.lstfilePath&&this.lstfilePath.length>0){let e=[],t={idProduct:this.idProductSelect,barCode:this.myForm.get("barCode")?.value,expirationDate:this.myForm.get("expirationDate")?.value,size:e,count:this.myForm.get("count")?.value}}}changeProduct(e){this.idProductSelect=e}static \u0275fac=function(t){return new(t||n)(s(x),s(re),s(G),s(oe),s(P),s(ne),s(N),s(_))};static \u0275cmp=d({type:n,selectors:[["app-register-stock"]],viewQuery:function(t,r){if(t&1&&(D(ce,5),D(pe,7,k)),t&2){let l;F(l=S())&&(r.inputFile=l.first),F(l=S())&&(r.container=l.first)}},features:[O],decls:32,vars:4,consts:[[3,"formGroup"],[1,"form-row"],[1,"form-group"],["formControlName","idProduct","placeholder","Select Product"],[3,"value",4,"ngFor","ngForOf"],["fullWidth","","placeholder","Enter Bar Code","formControlName","barCode"],["fullWidth","","type","number","placeholder","Enter Count","formControlName","count"],["formControlName","expirationDate",3,"placeholder"],["multiple","","formControlName","file",3,"change"],["status","primary",3,"click"],[3,"value"]],template:function(t,r){t&1&&(o(0,"form",0)(1,"div",1)(2,"nb-card")(3,"nb-card-header")(4,"h3"),m(5,"Register Product"),i()(),o(6,"nb-card-body")(7,"form",0)(8,"div",2)(9,"label"),m(10,"Product"),i(),o(11,"nb-select",3),w(12,de,2,2,"nb-option",4),i()(),o(13,"div",2)(14,"label"),m(15,"Bar Code"),i(),u(16,"nb-input",5),i(),o(17,"div",2)(18,"label"),m(19,"Count"),i(),u(20,"nb-input",6),i(),o(21,"div",2)(22,"label"),m(23,"Expiration Date"),i(),u(24,"app-date-picker",7),i(),o(25,"div",2)(26,"label"),m(27,"Attach Image"),i(),o(28,"nb-file-upload",8),f("change",function(g){return r.loadFile(g)}),i()(),o(29,"div",2)(30,"button",9),f("click",function(){return r.save()}),m(31,"Save Product"),i()()()()()()()),t&2&&(c("formGroup",r.myForm),p(7),c("formGroup",r.myForm),p(5),c("ngForOf",r.listProductByUser),p(12),c("placeholder","Select Date"))},dependencies:[h,T,Q,z,j,V,L,A,ie,Y,C,X,H,W,$,q,K,y,te,ee,Z,U,b],styles:[".tempImagen[_ngcontent-%COMP%]{width:25%;max-height:25%}.buttonCloseMain[_ngcontent-%COMP%]{font-size:x-large;position:relative}.foto-editor[_ngcontent-%COMP%]{display:flex;background-color:#811313}.buttonClose[_ngcontent-%COMP%]{font-size:x-large;position:absolute;top:0%;left:93%;color:red}"]})};export{le as RegisterStockComponent};
