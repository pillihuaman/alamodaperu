import './polyfills.server.mjs';
import{a as A}from"./chunk-QSNGXSKX.mjs";import{a as w}from"./chunk-WSQWBVCP.mjs";import"./chunk-LGLALFI7.mjs";import"./chunk-RMFMLZ2X.mjs";import"./chunk-FUVFZO2C.mjs";import{j as V}from"./chunk-ZUFXFZKB.mjs";import{Aa as a,Ba as f,Bb as h,Bd as W,Ca as g,Ce as z,Fa as E,Ga as u,Oa as c,Od as B,Pa as y,Qa as _,Xd as j,_ as m,bc as F,da as v,dc as x,ec as M,fc as b,ga as S,jc as N,ka as p,lc as q,nc as I,ra as s,tc as T,ud as D,vb as C,vc as O,wb as R,wc as P,ya as i,za as n,zd as G}from"./chunk-XCJYKJAR.mjs";import"./chunk-S6KH3LOX.mjs";function k(t,r){if(t&1&&(f(0),i(1,"div",12),c(2),n(),g()),t&2){let e=r.$implicit;m(2),y(e)}}function H(t,r){if(t&1&&(i(0,"div")(1,"span",12),c(2),n()()),t&2){let e,o=u(2);m(2),_(" ",(e=o.systemRequestForm.get("version"))==null?null:e.getError("customError")," ")}}function J(t,r){if(t&1&&(i(0,"div",9),p(1,k,3,1,"ng-container",10)(2,H,3,1,"div",11),n()),t&2){let e,o=u();m(),s("ngForOf",o.formErrors.version),m(),s("ngIf",(e=o.systemRequestForm.get("version"))==null?null:e.hasError("customError"))}}function K(t,r){if(t&1&&(f(0),i(1,"div",12),c(2),n(),g()),t&2){let e=r.$implicit;m(2),y(e)}}function L(t,r){if(t&1&&(i(0,"div")(1,"span",12),c(2),n()()),t&2){let e,o=u(2);m(2),_(" ",(e=o.systemRequestForm.get("contactEmail"))==null?null:e.getError("customError")," ")}}function Q(t,r){if(t&1&&(i(0,"div",9),p(1,K,3,1,"ng-container",10)(2,L,3,1,"div",11),n()),t&2){let e,o=u();m(),s("ngForOf",o.formErrors.contactEmail),m(),s("ngIf",(e=o.systemRequestForm.get("contactEmail"))==null?null:e.hasError("customError"))}}var $=class t{constructor(r,e,o){this.fb=r;this.supportService=e;this.modalRepository=o}systemRequestForm;ngOnInit(){this.systemRequestForm=this.fb.group({name:["",x.required],version:[""],mainMenu:[""],timezone:[""],isActive:[""],contactEmail:[""],supportPhone:[""]})}formErrors={};onSubmit(){if(this.systemRequestForm.valid){let r={name:this.systemRequestForm.get("name")?.value,version:this.systemRequestForm.get("version")?.value,mainMenu:this.systemRequestForm.get("mainMenu")?.value,timezone:"",isActive:!0,contactEmail:this.systemRequestForm.get("contactEmail")?.value,supportPhone:this.systemRequestForm.get("supportPhone")?.value};this.supportService.saveSystem(r).subscribe(e=>{this.modalRepository.showToast("success","Save Succes","Succes"),this.systemRequestForm.reset()},e=>{(e.status===422||e.status===500)&&e.error&&e.error.data&&e.error.data.payload&&e.error.data.payload.forEach(o=>{let l=o.propertyPath,d=o.valExceptionDescription;this.systemRequestForm.get(l)?.setErrors({invalid:!0,customError:d})})})}}static \u0275fac=function(e){return new(e||t)(v(T),v(A),v(w))};static \u0275cmp=S({type:t,selectors:[["app-register-system"]],decls:15,vars:3,consts:[[3,"ngSubmit","formGroup"],[1,"container"],[1,"form-group"],["type","text","placeholder","Name","fullWidth","","formControlName","name"],["type","text","placeholder","Version","fullWidth","","formControlName","version"],["class","error-message",4,"ngIf"],["type","text","placeholder","Main Menu","fullWidth","","formControlName","mainMenu"],["type","email","placeholder","Contact Email","fullWidth","","formControlName","contactEmail"],["type","text","placeholder","Support Phone","fullWidth","","formControlName","supportPhone"],[1,"error-message"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"text-danger"]],template:function(e,o){if(e&1&&(i(0,"form",0),E("ngSubmit",function(){return o.onSubmit()}),i(1,"div",1)(2,"div",2),a(3,"nb-input",3),n(),i(4,"div",2),a(5,"nb-input",4),p(6,J,3,2,"div",5),n(),i(7,"div",2),a(8,"nb-input",6),n(),i(9,"div",2),a(10,"nb-input",7),p(11,Q,3,2,"div",5),n(),i(12,"div",2),a(13,"nb-input",8),n(),a(14,"div",2),n()()),e&2){let l,d;s("formGroup",o.systemRequestForm),m(6),s("ngIf",(l=o.systemRequestForm.get("version"))==null?null:l.invalid),m(5),s("ngIf",(d=o.systemRequestForm.get("contactEmail"))==null?null:d.invalid)}},dependencies:[h,C,R,P,N,M,b,q,I,V,j,F,W,G,B,D,z,O],styles:[".error-message[_ngcontent-%COMP%]{color:red;font-size:14px;margin-top:4px}"]})};export{$ as RegisterSystemComponent};
