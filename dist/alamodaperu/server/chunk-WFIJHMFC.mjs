import './polyfills.server.mjs';
import{a as H}from"./chunk-AQDP3LVS.mjs";import{a as X}from"./chunk-73V6T75T.mjs";import{a as Q}from"./chunk-ZB5EWPKT.mjs";import"./chunk-J55PHKJ5.mjs";import{a as K}from"./chunk-4MMMLTFU.mjs";import{a as J}from"./chunk-WSQWBVCP.mjs";import"./chunk-4WIUCPPE.mjs";import"./chunk-GLNDTVHY.mjs";import"./chunk-3XVMWW6Z.mjs";import{$d as B,Cc as w,Ec as T,Fa as n,Fc as R,Ga as o,Ha as b,Hd as P,Kb as g,Ma as m,Md as F,Me as z,Nd as k,Od as A,Pe as V,Qe as q,Va as s,ae as E,ce as U,de as x,ee as O,fe as j,ga as u,hc as h,ie as G,ka as a,kc as N,lc as _,na as y,nc as v,oc as M,qa as S,sc as C,ue as L,vc as D,ve as W,ya as d,yc as I}from"./chunk-S35L2QCG.mjs";import{a as c,b as f}from"./chunk-VT4PU2RR.mjs";var Y=class p extends Q{constructor(i,t,e,r,l,Z){super(t,e,Z);this.fb=i;this.systemService=r;this.router=l}unifiedForm;results=[];ngOnInit(){this.unifiedForm=this.fb.group({id:[""],name:[""],pageName:[""],pageUrl:[""],menuTitle:[""],menuUrl:[""]}),this.loadSystemStructure()}loadSystemStructure(){let i=this.unifiedForm.value;this.spinnerService.show(),this.systemService.searchSystemEntitiesLineal(f(c({},i),{page:this.page,pagesize:this.pageSize})).subscribe({next:t=>{let e=t.payload||[];this.results=this.customizePropertyNames(e,this.columnMapping()),this.setDefaultColumns(this.results),this.updateHasMorePagesT(this.results.length>0),this.spinnerService.hide()},error:t=>{this.results=[],this.spinnerService.hide()}})}columnMapping(){return{systemId:"System ID",systemName:"System Name",systemDescription:"System Description",pageName:"Page Name",pageUrl:"Page URL",menuTitle:"Menu Title",menuUrl:"Menu URL"}}findByparameter(){this.page=1,this.pageSize=10,this.loadSystemStructure()}onNewSystem(){this.router.navigate(["/system-admin/system/detail","new"])}onNewPage(){this.router.navigate(["/system-admin/page/detail","new"])}onNewMenu(){this.router.navigate(["/system-admin/menu/detail","new"])}handleEditAction(i){let t=i?.data?.systemId;t&&this.router.navigate(["/system-admin/system/detail",t])}deleting(i){this.openDeleteModal(i).componentRef.instance.deleteConfirmed.subscribe(()=>{let e=i.data.systemId;this.systemService.deleteSystem(e).subscribe(()=>{this.showSuccessMessage("Deleted successfully","Success"),this.loadSystemStructure()})})}static \u0275fac=function(t){return new(t||p)(a(w),a(J),a(K),a(H),a(h),a(G))};static \u0275cmp=y({type:p,selectors:[["app-system"]],features:[S],decls:30,vars:4,consts:[[1,"form-container"],[3,"formGroup"],["expanded","true"],[1,"form-grid"],["nbInput","","fullWidth","","placeholder","System ID","formControlName","id"],["nbInput","","fullWidth","","placeholder","System Name","formControlName","name"],["nbInput","","fullWidth","","placeholder","Page Name","formControlName","pageName"],["nbInput","","fullWidth","","placeholder","Page URL","formControlName","pageUrl"],["nbInput","","fullWidth","","placeholder","Menu Title","formControlName","menuTitle"],["nbInput","","fullWidth","","placeholder","Menu URL","formControlName","menuUrl"],[1,"button-container"],[1,"action-buttons-grid"],["nbButton","","status","primary",3,"click"],["nbButton","","status","success",3,"click"],["nbButton","","status","info",3,"click"],["nbButton","","status","warning",3,"click"],[3,"editAction","deleteAction","loadMoreData","noData","datas","defaultColumns","hasMorePages"]],template:function(t,e){t&1&&(n(0,"div",0)(1,"form",1)(2,"nb-accordion")(3,"nb-accordion-item",2)(4,"nb-accordion-item-header"),s(5,"System Search"),o(),n(6,"nb-accordion-item-body")(7,"div",3),b(8,"input",4)(9,"input",5)(10,"input",6)(11,"input",7)(12,"input",8)(13,"input",9),o(),n(14,"div",10)(15,"div",11)(16,"button",12),m("click",function(){return e.findByparameter()}),s(17,"\u{1F50D} Search"),o(),n(18,"button",13),m("click",function(){return e.onNewSystem()}),s(19,"\u2795 New System"),o(),n(20,"button",14),m("click",function(){return e.onNewPage()}),s(21,"\u2795 New Page"),o(),n(22,"button",15),m("click",function(){return e.onNewMenu()}),s(23,"\u2795 New Menu"),o()()()()()()(),n(24,"nb-accordion")(25,"nb-accordion-item",2)(26,"nb-accordion-item-header"),s(27,"Data Results"),o(),n(28,"nb-accordion-item-body")(29,"app-table-datasource",16),m("editAction",function(l){return e.handleEditAction(l)})("deleteAction",function(l){return e.deleting(l)})("loadMoreData",function(){return e.loadSystemStructure()})("noData",function(){return e.showNoDataMessage()}),o()()()()()),t&2&&(u(),d("formGroup",e.unifiedForm),u(28),d("datas",e.results)("defaultColumns",e.defaultColumnsInput)("hasMorePages",e.hasMorePagesT))},dependencies:[g,N,A,k,F,E,B,P,q,U,x,j,O,C,_,v,M,D,I,R,T,W,L,z,V,X],styles:[".form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:16px}.button-container[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:12px;margin-top:16px}.action-buttons-grid[_ngcontent-%COMP%]{display:flex;gap:1rem;flex-wrap:wrap;margin-top:1rem}.action-buttons-grid[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:120px}"]})};export{Y as SystemComponent};
