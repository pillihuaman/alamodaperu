import './polyfills.server.mjs';
import{a as G}from"./chunk-2K57DALL.mjs";import{a as z}from"./chunk-NAI5LGHP.mjs";import{a as A}from"./chunk-CS2OMNPO.mjs";import"./chunk-LGLALFI7.mjs";import{a as B}from"./chunk-MMBKPOYP.mjs";import{a as $}from"./chunk-Z2ZYBPIV.mjs";import{a as H}from"./chunk-YCM6RVGE.mjs";import"./chunk-KHOIP4E3.mjs";import"./chunk-K3XOZODA.mjs";import{a as V}from"./chunk-GLNDTVHY.mjs";import"./chunk-SIMPSLXJ.mjs";import{Eb as E,Fa as a,Fb as k,Ga as r,Ha as M,Ic as R,Kb as u,Ld as T,Ma as b,Md as F,Na as v,Nd as D,Od as N,R as P,Rd as C,Ua as x,Va as l,Wa as y,Xa as O,Ye as I,bb as S,ea as h,ga as i,gb as w,ge as j,ka as c,kc as f,na as g,ra as s,ya as m}from"./chunk-BD2TXCEV.mjs";import"./chunk-S6KH3LOX.mjs";var _=class n{constructor(t){this.supportService=t}image;urlImagen;dataget(){console.log("Guardando clic en imagen:",this.image),this.supportService.saveClickCountImagen(this.image).subscribe({next:t=>console.log("Click registrado:",t),error:t=>console.error("Error al guardar el clic:",t)})}clickCount(t){console.log(t)}concateInput(t,e){return t.concat(e)}static \u0275fac=function(e){return new(e||n)(c(A))};static \u0275cmp=g({type:n,selectors:[["app-imagen-catch-information"]],inputs:{image:"image",urlImagen:"urlImagen"},decls:1,vars:2,consts:[[1,"responsiveImagen",3,"click","src","alt"]],template:function(e,o){e&1&&(a(0,"img",0),b("click",function(){return o.dataget()}),r()),e&2&&m("src",o.urlImagen,h)("alt",o.image==null?null:o.image.imageAlt)},dependencies:[u,C,f,I],styles:[".responsiveImagen[_ngcontent-%COMP%]{width:100%;max-height:100%}"]})};var Y=()=>[];function q(n,t){if(n&1&&(a(0,"div",10),M(1,"app-imagen-catch-information",11),r()),n&2){let e=t.$implicit;i(),m("urlImagen",e==null?null:e.url)}}function J(n,t){if(n&1&&(a(0,"div",8),s(1,q,2,1,"div",9),r()),n&2){let e,o=v().$implicit;i(),m("ngForOf",(e=o.respProduct==null?null:o.respProduct.fileMetadata)!==null&&e!==void 0?e:S(1,Y))}}function K(n,t){n&1&&(a(0,"div")(1,"nb-alert",12),l(2,"Este producto no tiene im\xE1genes."),r()())}function Q(n,t){if(n&1&&(a(0,"nb-card",4)(1,"nb-card-header"),l(2),r(),a(3,"nb-card-body"),s(4,J,2,2,"div",5)(5,K,3,0,"div",6),r(),a(6,"nb-card-footer")(7,"div",7),l(8),r()()()),n&2){let e=t.$implicit;i(2),y((e.respProduct==null?null:e.respProduct.name)||"Producto sin nombre"),i(2),m("ngIf",e==null||e.respProduct==null||e.respProduct.fileMetadata==null||e.respProduct.fileMetadata.length==null?null:e.respProduct.fileMetadata.length.toString()),i(),m("ngIf",!(!(e.respProduct==null||e.respProduct.fileMetadata==null)&&e.respProduct.fileMetadata.length)),i(3),O(" Producto ID: ",e.respProduct==null?null:e.respProduct.id," ")}}function X(n,t){if(n&1&&(a(0,"div")(1,"div",2),s(2,Q,9,4,"nb-card",3),r()()),n&2){let e=v();i(2),m("ngForOf",e.catalogImagesMetadata)}}function Z(n,t){n&1&&(a(0,"nb-alert",13),l(1,"No hay im\xE1genes disponibles."),r())}var L=class n{constructor(t,e,o,p,d){this.imagenData=t;this.imagenTempService=e;this.productViewImagenRepository=o;this.fileService=p;this.productService=d}catalogImagesMetadata=[];productosCargados=[];selectToken="";selectCountainerToken;updateImagen=new P;ngOnInit(){this.productViewImagenRepository.findAllViewsProducImag().subscribe({next:t=>{if(t?.payload){debugger;this.catalogImagesMetadata=t.payload,this.catalogImagesMetadata.forEach((e,o)=>{let p=e?.respProduct?.id??"";debugger;this.fileService.getCatalogImagen(V.tipoImagenCatalog,p).subscribe({next:d=>{this.catalogImagesMetadata[o].respProduct&&(this.catalogImagesMetadata[o].respProduct.fileMetadata=d.length>0?[d[0]]:[])},error:d=>{console.error("\u274C Error al obtener cat\xE1logo de im\xE1genes para producto con ID",p,d)}})}),console.log("\u{1F4E6} Lista inicial cargada (con productos acoplados):",this.catalogImagesMetadata)}},error:t=>{console.error("\u274C Error al cargar im\xE1genes",t)}})}changeImage(t,e){this.selectToken=e.imagetoken,this.selectCountainerToken=e.imageCountainerToken}enviarData(t){this.updateImagen.emit(t)}static \u0275fac=function(e){return new(e||n)(c(z),c(B),c(G),c($),c(H))};static \u0275cmp=g({type:n,selectors:[["app-main-page"]],inputs:{catalogImagesMetadata:"catalogImagesMetadata",productosCargados:"productosCargados",selectToken:"selectToken",selectCountainerToken:"selectCountainerToken"},outputs:{updateImagen:"updateImagen"},decls:7,vars:2,consts:[["noData",""],[4,"ngIf","ngIfElse"],[1,"gallery-grid"],["class","product-card",4,"ngFor","ngForOf"],[1,"product-card"],["class","images-wrapper",4,"ngIf"],[4,"ngIf"],[1,"product-footer"],[1,"images-wrapper"],["class","image-box",4,"ngFor","ngForOf"],[1,"image-box"],[3,"urlImagen"],["status","info"],["status","warning"]],template:function(e,o){if(e&1&&(a(0,"nb-card")(1,"nb-card-header"),l(2,"Galer\xEDa de Im\xE1genes de Productos"),r(),a(3,"nb-card-body"),s(4,X,3,1,"div",1)(5,Z,2,0,"ng-template",null,0,w),r()()),e&2){let p=x(6);i(4),m("ngIf",o.catalogImagesMetadata.length>0)("ngIfElse",p)}},dependencies:[u,E,k,f,C,I,N,F,D,T,j,_,R],styles:["nb-card[_ngcontent-%COMP%]{margin:1rem;border-radius:.5rem;box-shadow:0 4px 8px #0000001a}nb-card-header[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600;color:#333;padding:1rem;border-bottom:1px solid #f0f0f0;background-color:#f8f9fa}.product-card[_ngcontent-%COMP%]{transition:transform .3s ease,box-shadow .3s ease;border:1px solid #e0e0e0}.product-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 10px 20px #0000001a}.product-card[_ngcontent-%COMP%]   nb-card-header[_ngcontent-%COMP%]{font-size:1.2rem;background-color:#fff;color:#222;padding:.75rem 1rem}.images-wrapper[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(120px,1fr));gap:.75rem;padding:.5rem}.image-box[_ngcontent-%COMP%]{position:relative;overflow:hidden;border-radius:.25rem;aspect-ratio:1/1;background-color:#f5f5f5}app-imagen-catch-information[_ngcontent-%COMP%]{display:block;width:100%;height:100%}app-imagen-catch-information[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;transition:transform .3s ease}.image-box[_ngcontent-%COMP%]:hover   app-imagen-catch-information[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{transform:scale(1.05)}.product-footer[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:.75rem 1rem;font-size:.9rem;color:#555;border-top:1px solid #f0f0f0}nb-alert[_ngcontent-%COMP%]{margin:1rem}@media (max-width: 768px){.gallery-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(250px,1fr));gap:1rem}.images-wrapper[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}@media (max-width: 480px){.gallery-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}nb-card-header[_ngcontent-%COMP%]{font-size:1.3rem}.product-card[_ngcontent-%COMP%]   nb-card-header[_ngcontent-%COMP%]{font-size:1.1rem}}.gallery-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:1rem}@media (min-width: 1200px){.gallery-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(5,1fr)}}@media (max-width: 1199px) and (min-width: 992px){.gallery-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(4,1fr)}}@media (max-width: 991px) and (min-width: 768px){.gallery-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(3,1fr)}}@media (max-width: 767px) and (min-width: 576px){.gallery-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}@media (max-width: 575px){.gallery-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]})};export{L as MainPageComponent};
