import{a as L}from"./chunk-V7NZXRXS.js";import{a as X}from"./chunk-DMNBPJSE.js";import{a as K}from"./chunk-LRVPKQWK.js";import{a as $}from"./chunk-DND26X2X.js";import{a as J}from"./chunk-25GHDRPW.js";import{a as Q}from"./chunk-C4MTUD5M.js";import"./chunk-SM2U5EFL.js";import{$b as R,Ba as n,Bd as x,Ca as a,Cd as O,Da as S,Dd as j,Ed as G,Gb as C,Hd as W,Ia as l,Jb as D,Kb as _,Mb as N,Nb as M,Ra as p,Rb as y,Td as z,Ub as v,Ud as U,Xb as I,a as u,b as d,bc as w,cc as F,ed as T,ga as m,jd as A,je as V,ka as r,kd as P,ld as B,me as q,na as h,ne as H,qa as b,qb as g,ua as c,yd as E,zd as k}from"./chunk-KE7QE7ZJ.js";var Y=class f extends K{constructor(i,t,e,o,s,Z){super(e,o,Z);this.fb=i;this.supplierRepository=t;this.router=s}unifiedForm;results=[];ngOnInit(){this.unifiedForm=this.fb.group({id:[""],name:[""],ruc:[""],email:[""],phone:[""]}),this.loadSupplierData()}loadSupplierData(){let i=this.unifiedForm.value;this.spinnerService.show(),this.supplierRepository.listSuppliers(d(u({},i),{page:this.page,pagesize:this.pageSize})).subscribe({next:t=>{let e=t||[];this.results=this.customizePropertyNames(e,this.columnMapping()),this.setDefaultColumns(this.results),this.updateHasMorePagesT(this.results.length>0),this.spinnerService.hide()},error:()=>{this.results=[],this.spinnerService.hide()}})}columnMapping(){return{id:"ID",name:"Name",ruc:"RUC",address:"Address",email:"Email",phone:"Phone",country:"Country",status:"Status",contacts:"Contacts"}}findByparameter(){this.page=1,this.pageSize=10,this.loadSupplierData()}onNewSupplier(){this.router.navigate(["/support/supplier/detail","new"])}deletings(i){let t=this.openDeleteModal(i);t.componentRef.instance.rowData=i,t.componentRef.instance.deleteConfirmed.subscribe(()=>{let e=i.data.id;this.supplierRepository.deleteSupplier(e).subscribe(()=>{this.showSuccessMessage("Supplier deleted successfully","Success"),this.loadSupplierData()})})}deleting(i){this.dialogService.open($,{context:{rowData:d(u({},i.data),{typeDescription:"QUESTION",description:i.data.Name})}}).onClose.subscribe(e=>{if(e==="deleteConfirmed"){let o=i.data.ID;this.supplierRepository.deleteSupplier(o).subscribe(()=>{this.showSuccessMessage("Supplier deleted successfully","Success"),this.loadSupplierData()})}})}handleEditAction(i){let t=i?.data?.ID;console.log("Row ID:",t),t?this.router.navigate([`/support/supplier/detail/${t}`]):console.error("ID is undefined for the row")}static \u0275fac=function(t){return new(t||f)(r(R),r(X),r(Q),r(J),r(C),r(W))};static \u0275cmp=h({type:f,selectors:[["app-supplier"]],features:[b],decls:25,vars:4,consts:[[1,"form-container"],[3,"formGroup"],["expanded","true"],[1,"form-grid"],["nbInput","","fullWidth","","placeholder","Supplier ID","formControlName","id"],["nbInput","","fullWidth","","placeholder","Name","formControlName","name"],["nbInput","","fullWidth","","placeholder","RUC","formControlName","ruc"],["nbInput","","fullWidth","","placeholder","Email","formControlName","email"],["nbInput","","fullWidth","","placeholder","Phone","formControlName","phone"],[1,"button-container"],[1,"action-buttons-grid"],["nbButton","","status","primary",3,"click"],["nbButton","","status","success",3,"click"],[3,"editAction","deleteAction","loadMoreData","noData","datas","defaultColumns","hasMorePages"]],template:function(t,e){t&1&&(n(0,"div",0)(1,"form",1)(2,"nb-accordion")(3,"nb-accordion-item",2)(4,"nb-accordion-item-header"),p(5,"Supplier Search"),a(),n(6,"nb-accordion-item-body")(7,"div",3),S(8,"input",4)(9,"input",5)(10,"input",6)(11,"input",7)(12,"input",8),a(),n(13,"div",9)(14,"div",10)(15,"button",11),l("click",function(){return e.findByparameter()}),p(16,"\u{1F50D} Search"),a(),n(17,"button",12),l("click",function(){return e.onNewSupplier()}),p(18,"\u2795 New Supplier"),a()()()()()(),n(19,"nb-accordion")(20,"nb-accordion-item",2)(21,"nb-accordion-item-header"),p(22,"Data Results"),a(),n(23,"nb-accordion-item-body")(24,"app-table-datasource",13),l("editAction",function(s){return e.handleEditAction(s)})("deleteAction",function(s){return e.deleting(s)})("loadMoreData",function(){return e.loadSupplierData()})("noData",function(){return e.showNoDataMessage()}),a()()()()()()),t&2&&(m(),c("formGroup",e.unifiedForm),m(23),c("datas",e.results)("defaultColumns",e.defaultColumnsInput)("hasMorePages",e.hasMorePagesT))},dependencies:[g,D,B,P,A,k,E,T,H,x,O,G,j,y,_,N,M,v,I,F,w,U,z,V,q,L],styles:[".form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:16px}.button-container[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:12px;margin-top:16px}.action-buttons-grid[_ngcontent-%COMP%]{display:flex;gap:1rem;flex-wrap:wrap;margin-top:1rem}.action-buttons-grid[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:120px}"]})};export{Y as SupplierComponent};
