import{a as ee}from"./chunk-R6IASW6H.js";import{a as R}from"./chunk-V7NZXRXS.js";import{a as Z}from"./chunk-LRVPKQWK.js";import{a as X}from"./chunk-DND26X2X.js";import{a as Y}from"./chunk-25GHDRPW.js";import{a as L}from"./chunk-C4MTUD5M.js";import"./chunk-SM2U5EFL.js";import{$b as W,Ba as a,Bd as Q,Ca as s,Cd as $,Da as E,Dd as x,Ed as J,Gb as j,Hd as K,Ia as d,Jb as h,Kb as G,Mb as P,Nb as O,Ra as m,Rb as q,Td as M,Ub as U,Ud as y,Xb as V,a as l,b as F,bc as v,cc as D,db as w,ed as N,g as A,ga as c,h as u,jd as _,je as I,ka as r,kd as z,ld as T,me as S,na as B,ne as C,qa as k,qb as b,ua as f,yd as H,zd as g}from"./chunk-KE7QE7ZJ.js";var n=class extends Z{constructor(o,t,e,i,p,te){super(e,i,te);this.fb=o;this.tenantRepository=t;this.router=p}unifiedForm;results=[];ngOnInit(){this.unifiedForm=this.fb.group({id:[""],name:[""],domain:[""],active:[!0]}),this.loadTenantData()}loadTenantData(){let o=this.unifiedForm.value;this.spinnerService.show(),this.tenantRepository.listTenants(l({},o)).subscribe({next:t=>{this.results=this.customizePropertyNames(t||[],this.columnMapping()),this.setDefaultColumns(this.results),this.updateHasMorePagesT(this.results.length>0),this.spinnerService.hide()},error:()=>{this.results=[],this.spinnerService.hide()}})}columnMapping(){return{id:"ID",name:"Name",domain:"Domain",active:"Active"}}findByparameter(){this.page=1,this.pageSize=10,this.loadTenantData()}onNewTenant(){this.router.navigate(["/support/tenant/detail","new"])}deleting(o){this.dialogService.open(X,{context:{rowData:F(l({},o.data),{typeDescription:"QUESTION",description:o.data.Name})}}).onClose.subscribe(e=>{if(e==="deleteConfirmed"){let i=o.data.ID;this.tenantRepository.deleteTenant(i).subscribe(()=>{this.showSuccessMessage("Tenant deleted successfully","Success"),this.loadTenantData()})}})}handleEditAction(o){let t=o?.data?.ID;t&&this.router.navigate([`/support/tenant/detail/${t}`])}};u(n,"\u0275fac",function(t){return new(t||n)(r(W),r(ee),r(L),r(Y),r(j),r(K))}),u(n,"\u0275cmp",B({type:n,selectors:[["app-support-tenant"]],features:[k],decls:23,vars:4,consts:[[1,"form-container"],[3,"formGroup"],["expanded","true"],[1,"form-grid"],["nbInput","","fullWidth","","placeholder","ID","formControlName","id"],["nbInput","","fullWidth","","placeholder","Nombre","formControlName","name"],["nbInput","","fullWidth","","placeholder","Dominio","formControlName","domain"],[1,"button-container"],[1,"action-buttons-grid"],["nbButton","","status","primary",3,"click"],["nbButton","","status","success",3,"click"],[3,"editAction","deleteAction","loadMoreData","noData","datas","defaultColumns","hasMorePages"]],template:function(t,e){t&1&&(a(0,"div",0)(1,"form",1)(2,"nb-accordion")(3,"nb-accordion-item",2)(4,"nb-accordion-item-header"),m(5,"B\xFAsqueda de Tenants"),s(),a(6,"nb-accordion-item-body")(7,"div",3),E(8,"input",4)(9,"input",5)(10,"input",6),s(),a(11,"div",7)(12,"div",8)(13,"button",9),d("click",function(){return e.findByparameter()}),m(14,"\u{1F50D} Buscar"),s(),a(15,"button",10),d("click",function(){return e.onNewTenant()}),m(16,"\u2795 Nuevo Tenant"),s()()()()()(),a(17,"nb-accordion")(18,"nb-accordion-item",2)(19,"nb-accordion-item-header"),m(20,"Resultados"),s(),a(21,"nb-accordion-item-body")(22,"app-table-datasource",11),d("editAction",function(p){return e.handleEditAction(p)})("deleteAction",function(p){return e.deleting(p)})("loadMoreData",function(){return e.loadTenantData()})("noData",function(){return e.showNoDataMessage()}),s()()()()()()),t&2&&(c(),f("formGroup",e.unifiedForm),c(21),f("datas",e.results)("defaultColumns",e.defaultColumnsInput)("hasMorePages",e.hasMorePagesT))},dependencies:[b,h,T,z,_,g,H,N,C,Q,$,J,x,q,G,P,O,U,V,D,v,y,M,I,S,R],encapsulation:2})),n=A([w({selector:"app-support-tenant",standalone:!0,imports:[b,h,T,_,g,N,C,D,v,y,M,I,S,R],templateUrl:"./support-tenant.component.html",styleUrl:"./support-tenant.component.css"})],n);export{n as SupportTenantComponent};
