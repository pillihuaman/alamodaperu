import{a as pe}from"./chunk-7TELWWLP.js";import{a as C}from"./chunk-YZLXWSIR.js";import"./chunk-GJEU6FZM.js";import{a as se}from"./chunk-IGSJ74VS.js";import"./chunk-J4WYP6TI.js";import{a as ae}from"./chunk-VVXZNI42.js";import{a as ne}from"./chunk-C4MTUD5M.js";import{a as m,b as ie}from"./chunk-TVVRTYFL.js";import{a as y}from"./chunk-SM2U5EFL.js";import"./chunk-HUQJSXFI.js";import{$b as q,Da as n,Ea as a,Ge as re,I as R,Ka as s,L as g,Md as Y,Nd as J,Ob as F,Pb as p,Qb as B,Rb as O,Rd as K,Sd as Q,Ta as S,Td as X,Ud as Z,Vb as j,Vd as ee,Xd as te,Yb as k,Yd as oe,gc as w,ha as h,ic as $,jc as V,la as c,ld as z,m as I,o as N,oa as T,qd as U,r as D,rd as L,sa as M,sd as G,ub as A,vd as W,wa as f,wd as H,y as P,yb as E,yd as x}from"./chunk-V3AJZABF.js";var b=class{};var _=class u extends b{constructor(t,o){super();this.http=t;this.apiService=o}storeSubject=new I([]);store$=this.storeSubject.asObservable();findStores(t,o,e,r,i,d){let l={page:t,pagesize:o,id:e,name:r,country:i,status:d},v=`${m.API_SUPPORT}/${m.URL_TYPE_ACCES_PRIVATE}/v1/support/store`;return this.apiService.get(v,l)}getStoreById(t){let o=`${m.API_SUPPORT}/${m.URL_TYPE_ACCES_PRIVATE}/v1/support/store/${t}`;return this.apiService.get(o)}saveStore(t){let o={data:t,trace:{traceId:"01"}},e=`${m.API_SUPPORT}/${m.URL_TYPE_ACCES_PRIVATE}/v1/support/store`;return this.apiService.post(e,o)}deleteStore(t){let o=`${m.API_SUPPORT}/${m.URL_TYPE_ACCES_PRIVATE}/v1/support/store/${t}`;return this.apiService.delete(o)}fetchStores(t,o,e,r,i,d){this.findStores(t,o,e,r,i,d).subscribe(l=>{this.storeSubject.next(l.payload)})}reloadStores(){this.storeSubject.next(this.storeSubject.value)}static \u0275fac=function(o){return new(o||u)(g(E),g(ie))};static \u0275prov=R({token:u,factory:u.\u0275fac,providedIn:"root"})};var le=class u extends se{constructor(t,o,e,r,i){super(o,e,i);this.fb=t;this.storeService=r}StoreForm;datas=[];isLoading=!1;searchButtonDisabled=!0;listError;isdelelete;ngOnInit(){this.buildForm(),this.loadStores(),this.finStoreProcess()}buildForm(){this.StoreForm=this.fb.group({id:["",p.required],name:["",p.required],address:["",p.required],country:["",p.required],email:["",[p.required,p.email]],phone:["",p.required],status:["",p.required],ownerName:["",p.required]})}columnMapping(){return{id:"ID",name:"Store Name",address:"Address",country:"Country",email:"Email",phone:"Phone",status:"Status",ownerName:"Owner Name"}}loadStores(){this.storeService.store$.subscribe(t=>{this.processStoreData(t),this.spinnerService.hide()})}processStoreData(t){this.datas=this.customizePropertyNames(t,this.columnMapping()),this.setDefaultColumns(this.datas),this.updateHasMorePagesT(this.datas&&this.datas.length>0)}checkInputs(){let t=this.StoreForm.get("id")?.value||"",o=this.StoreForm.get("name")?.value||"",e=this.StoreForm.get("country")?.value||"",r=this.StoreForm.get("email")?.value||"",i=this.StoreForm.get("phone")?.value||"",d=this.StoreForm.get("status")?.value||"";this.searchButtonDisabled=!(t||o||e||r||i||d),this.searchButtonDisabled&&this.finStoreProcess()}finStoreProcess(){this.spinnerService.show();let{id:t,name:o,country:e,email:r,phone:i,status:d}=this.StoreForm.value;this.storeService.findStores(this.page,this.pageSize,t,o,e,r).pipe(D(l=>{let v=l?.payload||[];return this.customizePropertyNames(v,this.columnMapping())}),P(l=>(console.error("Error fetching stores:",l),N([])))).subscribe(l=>{this.datas=l,this.setDefaultColumns(this.datas),this.updateHasMorePagesT(this.datas&&this.datas.length>0),this.spinnerService.hide()})}findByparameter(){this.listError=this.validateObjectID(),this.listError.length===0&&(this.StoreForm.get("id")?.markAsTouched(),this.page=y.page,this.pageSize=y.perPage,this.finStoreProcess())}validateObjectID(){let t=this.StoreForm.get("id")?.value||"",o=[],e=C.isValidObjectId(t);return!C.empty(t)&&!e&&o.push("ID is not valid."),o}onNewClick(){}handleEditAction(t){if(!t?.data?.ID){console.warn("Invalid Store data.");return}let o=t.data.ID}handleDeleteAction(t){if(t.data.ID!==void 0){let o=t.data.ID;this.storeService.deleteStore(o).subscribe(()=>{this.showSuccessMessage("Delete Success","Success"),this.isdelelete=t},e=>{this.handleValidationErrors(e,this.formData)})}}deleting(t){this.openDeleteModal(t).componentRef.instance.deleteConfirmed.subscribe(()=>{this.handleDeleteAction(t)})}static \u0275fac=function(o){return new(o||u)(c(w),c(ne),c(ae),c(_),c(te))};static \u0275cmp=T({type:u,selectors:[["app-store"]],features:[M],decls:28,vars:6,consts:[[1,"form-container"],[3,"formGroup"],["multi","true"],["expanded","true"],[1,"form-grid"],["nbInput","","fullWidth","","type","text","placeholder","ID","formControlName","id",3,"input"],["nbInput","","fullWidth","","type","text","placeholder","Name","formControlName","name",3,"input"],["nbInput","","fullWidth","","type","text","placeholder","Address","formControlName","address",3,"input"],["nbInput","","fullWidth","","type","text","placeholder","Country","formControlName","country",3,"input"],["nbInput","","fullWidth","","type","text","placeholder","Email","formControlName","email",3,"input"],["nbInput","","fullWidth","","type","text","placeholder","Phone","formControlName","phone",3,"input"],["nbInput","","fullWidth","","type","text","placeholder","Owner Name","formControlName","ownerName",3,"input"],[1,"button-container"],["nbButton","","status","primary",3,"click","disabled"],["nbButton","","status","success",3,"click"],[3,"pageChange","pageSizeChange","deleteAction","editAction","loadMoreData","noData","datas","defaultColumns","isdelelete","hasMorePages"]],template:function(o,e){o&1&&(n(0,"nb-layout")(1,"nb-layout-column")(2,"div",0)(3,"form",1)(4,"nb-accordion",2)(5,"nb-accordion-item",3)(6,"nb-accordion-item-header"),S(7,"Store Information"),a(),n(8,"nb-accordion-item-body")(9,"div",4)(10,"input",5),s("input",function(){return e.checkInputs()}),a(),n(11,"input",6),s("input",function(){return e.checkInputs()}),a(),n(12,"input",7),s("input",function(){return e.checkInputs()}),a(),n(13,"input",8),s("input",function(){return e.checkInputs()}),a(),n(14,"input",9),s("input",function(){return e.checkInputs()}),a(),n(15,"input",10),s("input",function(){return e.checkInputs()}),a(),n(16,"input",11),s("input",function(){return e.checkInputs()}),a()(),n(17,"div",12)(18,"button",13),s("click",function(){return e.findByparameter()}),S(19,"Search"),a(),n(20,"button",14),s("click",function(){return e.onNewClick()}),S(21,"New"),a()()()()(),n(22,"nb-accordion",2)(23,"nb-accordion-item",3)(24,"nb-accordion-item-header"),S(25,"Data Information"),a(),n(26,"nb-accordion-item-body")(27,"app-table-datasource",15),s("pageChange",function(i){return e.onPageChange(i)})("pageSizeChange",function(i){return e.onPageSizeChange(i)})("deleteAction",function(i){return e.deleting(i)})("editAction",function(i){return e.handleEditAction(i)})("loadMoreData",function(){return e.finStoreProcess()})("noData",function(){return e.showNoDataMessage()}),a()()()()()()()()),o&2&&(h(3),f("formGroup",e.StoreForm),h(15),f("disabled",e.searchButtonDisabled),h(9),f("datas",e.datas)("defaultColumns",e.defaultColumnsInput)("isdelelete",e.isdelelete)("hasMorePages",e.hasMorePagesT))},dependencies:[A,V,j,F,B,O,k,q,$,G,L,U,J,Y,z,oe,x,W,H,ee,K,Q,Z,X,re,pe],styles:[".form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:16px}.button-container[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:12px;margin-top:16px}"]})};export{le as StoreComponent};
