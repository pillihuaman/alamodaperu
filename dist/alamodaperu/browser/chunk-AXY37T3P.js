import{a as Y}from"./chunk-HLRQU3FY.js";import{a as H}from"./chunk-F2YZHXL6.js";import{a as U}from"./chunk-3YDNKYIL.js";import"./chunk-X3J7YRVF.js";import{a as W}from"./chunk-DUEX7GZ6.js";import{a as G}from"./chunk-DEYWHEGI.js";import{a as q}from"./chunk-4ZJXKBZD.js";import{a as J}from"./chunk-6ZZGLH3B.js";import"./chunk-4QW5O6GU.js";import{a as L}from"./chunk-SM2U5EFL.js";import"./chunk-MHISBB5P.js";import{Ba as r,Ca as a,Da as y,Ga as O,Gb as N,Ia as f,Ja as g,Jb as C,Qa as w,R as b,Ra as d,S as h,Sa as S,Ta as R,Y as M,Za as k,cb as E,cc as D,ea as x,fd as j,ga as i,gd as V,hd as z,id as A,ka as m,kd as B,lb as T,ld as I,mb as F,na as u,ne as v,qb as _,ra as s,ua as c,xd as $}from"./chunk-KE7QE7ZJ.js";var P=class n{constructor(t){this.supportService=t}image;urlImagen;dataget(){console.log("Guardando clic en imagen:",this.image),this.supportService.saveClickCountImagen(this.image).subscribe({next:t=>console.log("Click registrado:",t),error:t=>console.error("Error al guardar el clic:",t)})}clickCount(t){console.log(t)}concateInput(t,e){return t.concat(e)}static \u0275fac=function(e){return new(e||n)(m(U))};static \u0275cmp=u({type:n,selectors:[["app-imagen-catch-information"]],inputs:{image:"image",urlImagen:"urlImagen"},decls:1,vars:2,consts:[[1,"responsiveImagen",3,"click","src","alt"]],template:function(e,o){e&1&&(r(0,"img",0),f("click",function(){return o.dataget()}),a()),e&2&&c("src",o.urlImagen,x)("alt",o.image==null?null:o.image.imageAlt)},dependencies:[_,I,C,v],styles:[".responsiveImagen[_ngcontent-%COMP%]{width:100%;max-height:100%}"]})};var Z=()=>[];function ee(n,t){if(n&1&&(r(0,"div",11),y(1,"app-imagen-catch-information",12),a()),n&2){let e=t.$implicit;i(),c("urlImagen",e==null?null:e.url)}}function te(n,t){if(n&1&&(r(0,"div",9),s(1,ee,2,1,"div",10),a()),n&2){let e,o=g().$implicit;i(),c("ngForOf",(e=o.respProduct==null?null:o.respProduct.fileMetadata)!==null&&e!==void 0?e:k(1,Z))}}function ne(n,t){n&1&&(r(0,"div")(1,"nb-alert",13),d(2,"Este producto no tiene im\xE1genes."),a()())}function oe(n,t){if(n&1){let e=O();r(0,"button",14),f("click",function(){b(e);let l=g().$implicit,p=g(2);return h(p.viewCatalog(l.respProduct))}),d(1,` Ver Cat\xE1logo
`),a()}}function re(n,t){if(n&1&&(r(0,"nb-card",4)(1,"nb-card-header"),d(2),a(),r(3,"nb-card-body"),s(4,te,2,2,"div",5)(5,ne,3,0,"div",6),a(),r(6,"nb-card-footer")(7,"div",7),d(8),s(9,oe,2,0,"button",8),a()()()),n&2){let e=t.$implicit;i(2),S((e.respProduct==null?null:e.respProduct.name)||"Producto sin nombre"),i(2),c("ngIf",e==null||e.respProduct==null||e.respProduct.fileMetadata==null||e.respProduct.fileMetadata.length==null?null:e.respProduct.fileMetadata.length.toString()),i(),c("ngIf",!(!(e.respProduct==null||e.respProduct.fileMetadata==null)&&e.respProduct.fileMetadata.length)),i(3),R(" Producto ID: ",e.respProduct==null?null:e.respProduct.id," "),i(),c("ngIf",e.respProduct==null||e.respProduct.fileMetadata==null?null:e.respProduct.fileMetadata.length)}}function ae(n,t){if(n&1&&(r(0,"div")(1,"div",2),s(2,re,10,5,"nb-card",3),a()()),n&2){let e=g();i(2),c("ngForOf",e.catalogImagesMetadata)}}function ie(n,t){n&1&&(r(0,"nb-alert",15),d(1,"No hay im\xE1genes disponibles."),a())}var K=class n{constructor(t,e,o,l,p,me,ce){this.imagenData=t;this.imagenTempService=e;this.productViewImagenRepository=o;this.fileService=l;this.productService=p;this.router=me;this.authService=ce}catalogImagesMetadata=[];productosCargados=[];selectToken="";selectCountainerToken;updateImagen=new M;ngOnInit(){this.productViewImagenRepository.findAllViewsProducImag().subscribe({next:t=>{if(t?.payload){debugger;this.catalogImagesMetadata=t.payload,this.catalogImagesMetadata.forEach((e,o)=>{let l=e?.respProduct?.id??"";debugger;this.fileService.getCatalogImagen(L.tipoImagenCatalog,l).subscribe({next:p=>{this.catalogImagesMetadata[o].respProduct&&(this.catalogImagesMetadata[o].respProduct.fileMetadata=p.length>0?[p[0]]:[])},error:p=>{console.error("\u274C Error al obtener cat\xE1logo de im\xE1genes para producto con ID",l,p)}})}),console.log("\u{1F4E6} Lista inicial cargada (con productos acoplados):",this.catalogImagesMetadata)}},error:t=>{console.error("\u274C Error al cargar im\xE1genes",t)}})}changeImage(t,e){this.selectToken=e.imagetoken,this.selectCountainerToken=e.imageCountainerToken}enviarData(t){this.updateImagen.emit(t)}viewCatalog(t){debugger;t&&this.router.navigate(["/home/detail"],{state:t})}static \u0275fac=function(e){return new(e||n)(m(H),m(W),m(Y),m(q),m(J),m(N),m(G))};static \u0275cmp=u({type:n,selectors:[["app-main-page"]],inputs:{catalogImagesMetadata:"catalogImagesMetadata",productosCargados:"productosCargados",selectToken:"selectToken",selectCountainerToken:"selectCountainerToken"},outputs:{updateImagen:"updateImagen"},decls:7,vars:2,consts:[["noData",""],[4,"ngIf","ngIfElse"],[1,"gallery-grid"],["class","product-card",4,"ngFor","ngForOf"],[1,"product-card"],["class","images-wrapper",4,"ngIf"],[4,"ngIf"],[1,"product-footer"],["nbButton","","size","tiny","status","primary",3,"click",4,"ngIf"],[1,"images-wrapper"],["class","image-box",4,"ngFor","ngForOf"],[1,"image-box"],[3,"urlImagen"],["status","info"],["nbButton","","size","tiny","status","primary",3,"click"],["status","warning"]],template:function(e,o){if(e&1&&(r(0,"nb-card")(1,"nb-card-header"),d(2,"Galer\xEDa de Im\xE1genes de Productos"),a(),r(3,"nb-card-body"),s(4,ae,3,1,"div",1)(5,ie,2,0,"ng-template",null,0,E),a()()),e&2){let l=w(6);i(4),c("ngIf",o.catalogImagesMetadata.length>0)("ngIfElse",l)}},dependencies:[_,T,F,C,I,B,v,A,V,z,j,$,P,D],styles:["nb-card[_ngcontent-%COMP%]{margin:1rem;border-radius:.5rem;box-shadow:0 4px 8px #0000001a}nb-card-header[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600;color:#333;padding:1rem;border-bottom:1px solid #f0f0f0;background-color:#f8f9fa}.product-card[_ngcontent-%COMP%]{transition:transform .3s ease,box-shadow .3s ease;border:1px solid #e0e0e0}.product-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 10px 20px #0000001a}.product-card[_ngcontent-%COMP%]   nb-card-header[_ngcontent-%COMP%]{font-size:1.2rem;background-color:#fff;color:#222;padding:.75rem 1rem}.images-wrapper[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(120px,1fr));gap:.75rem;padding:.5rem}.image-box[_ngcontent-%COMP%]{position:relative;overflow:hidden;border-radius:.25rem;aspect-ratio:1/1;background-color:#f5f5f5}app-imagen-catch-information[_ngcontent-%COMP%]{display:block;width:100%;height:100%}app-imagen-catch-information[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;transition:transform .3s ease}.image-box[_ngcontent-%COMP%]:hover   app-imagen-catch-information[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{transform:scale(1.05)}.product-footer[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:.75rem 1rem;font-size:.9rem;color:#555;border-top:1px solid #f0f0f0}nb-alert[_ngcontent-%COMP%]{margin:1rem}@media (max-width: 768px){.gallery-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(250px,1fr));gap:1rem}.images-wrapper[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}@media (max-width: 480px){.gallery-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}nb-card-header[_ngcontent-%COMP%]{font-size:1.3rem}.product-card[_ngcontent-%COMP%]   nb-card-header[_ngcontent-%COMP%]{font-size:1.1rem}}.gallery-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:1rem}@media (min-width: 1200px){.gallery-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(5,1fr)}}@media (max-width: 1199px) and (min-width: 992px){.gallery-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(4,1fr)}}@media (max-width: 991px) and (min-width: 768px){.gallery-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(3,1fr)}}@media (max-width: 767px) and (min-width: 576px){.gallery-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}@media (max-width: 575px){.gallery-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]})};export{K as MainPageComponent};
