import{a as _e}from"./chunk-J4PXBQXL.js";import{a as De}from"./chunk-X3J7YRVF.js";import{a as Ne}from"./chunk-SEGHYHH7.js";import"./chunk-GJEU6FZM.js";import{a as Ce}from"./chunk-LRVPKQWK.js";import{a as G}from"./chunk-DND26X2X.js";import{a as ye}from"./chunk-25GHDRPW.js";import{a as P}from"./chunk-C4MTUD5M.js";import{a as W}from"./chunk-SM2U5EFL.js";import{i as ge}from"./chunk-MHISBB5P.js";import{$b as ie,Ba as t,Ca as e,Da as s,Ga as Y,Gd as pe,Hd as B,Ia as D,Ja as N,Jb as Z,Kb as C,Lb as d,Mb as _,Nb as x,Od as de,Pd as ce,Qa as q,Qd as ue,R as A,Ra as n,Rb as S,S as V,Sa as K,Sb as ee,Ta as Q,Td as fe,Ub as E,Ud as be,Xb as M,Zb as te,a as z,ac as oe,b as L,bc as ne,cc as re,ed as I,ga as l,gd as R,id as w,jd as ae,je as ve,ka as p,kd as F,ke as j,lb as $,ld as h,mb as J,md as le,me as he,na as b,nb as X,nd as me,ne as g,qa as H,qb as v,ra as c,td as se,ua as m,yd as O,zd as T}from"./chunk-KE7QE7ZJ.js";var U=class i{currentYear=new Date().getFullYear();static \u0275fac=function(o){return new(o||i)};static \u0275cmp=b({type:i,selectors:[["app-modal-footer"]],decls:14,vars:1,consts:[[1,"modal-footer-card","no-border"],[1,"modal-footer","no-border"],[1,"footer-left"],[1,"footer-right"],["href","/about","nbButton","","size","tiny","appearance","ghost"],["href","/privacy","nbButton","","size","tiny","appearance","ghost"],["href","/terms","nbButton","","size","tiny","appearance","ghost"],["href","/contact","nbButton","","size","tiny","appearance","ghost"]],template:function(o,r){o&1&&(t(0,"nb-card",0)(1,"nb-card-body",1)(2,"div",2)(3,"span"),n(4),e()(),t(5,"div",3)(6,"a",4),n(7,"About"),e(),t(8,"a",5),n(9,"Privacy"),e(),t(10,"a",6),n(11,"Terms"),e(),t(12,"a",7),n(13,"Contact"),e()()()()),o&2&&(l(4),Q("\xA9 ",r.currentYear," Pillihuaman Technologies. All rights reserved."))},dependencies:[v,h,F,I,g,w,R],styles:[".modal-footer-card[_ngcontent-%COMP%]{background:transparent;box-shadow:none;border-top:1px solid var(--nb-border-basic);padding:1rem;display:flex;justify-content:flex-end;align-items:center}.modal-footer[_ngcontent-%COMP%]{display:flex;gap:10px}.modal-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:100px}.no-border[_ngcontent-%COMP%]{border:none!important;box-shadow:none!important;background:transparent!important}  .page-container{display:flex;flex-direction:column;min-height:100vh;padding:0!important;margin:0!important}  .page-content{flex-grow:1;padding:1rem;background-color:#f8f9fa}  app-modal-footer{flex-shrink:0}"]})};var k=class i extends Ce{constructor(o,r,u,f,y,Ie,Re){super(y,r,Re);this.fb=o;this.datePipe=u;this.supportService=f;this.dialogRef=Ie;this.dialogRef=Ie}ngOnInit(){this.buildForm(),this.entityData&&this.patchFormValues(),window.addEventListener("keydown",this.handleEscKey.bind(this))}patchFormValues(){this.formData.patchValue({id:this.entityData.id||"",name:this.entityData.name||"",lastName:this.entityData.lastName||"",startDate:this.entityData.startDate?j(this.entityData.startDate+"","dd/MM/yyyy",new Date):null,finishDate:this.entityData.finishDate?j(this.entityData.finishDate+"","dd/MM/yyyy",new Date):null,typeDocument:this.entityData.typeDocument||"",document:this.entityData.document||"",salaryHours:this.entityData.salaryHours||""}),console.log("Form Values:",this.formData.value)}buildForm(){this.formData=this.fb.group({id:[""],name:["",d.required],lastName:[""],startDate:["",d.required],finishDate:["",d.required],document:["",d.required],typeDocument:[""],salaryHours:[""],idToFind:[""],nameToFind:[""],lastNameToFind:[""],documentToFind:[""]})}onSubmit(){let o=this.datePipe.transform(this.formData.value.startDate,"dd/MM/yyyy")||"",r=this.datePipe.transform(this.formData.value.finishDate,"dd/MM/yyyy")||"",u=L(z({},this.formData.value),{startDate:o,finishDate:r});this.spinnerService.show(),this.supportService.saveEmployee(u).subscribe({next:()=>this.handleSuccessResponseSaveOrUpdate(u),error:f=>this.handleErrorResponseSaveOrUpdate(f)})}static \u0275fac=function(r){return new(r||i)(p(ie),p(ye),p(X),p(De),p(P),p(pe),p(B))};static \u0275cmp=b({type:i,selectors:[["app-employee-detail"]],features:[H],decls:24,vars:4,consts:[["startDate",""],["finishDate",""],[3,"title"],[3,"ngSubmit","formGroup"],[1,"form-container"],["nbInput","","type","text","placeholder","ID","required","","formControlName","id","readonly",""],["nbInput","","type","text","placeholder","Name","required","","formControlName","name"],["nbInput","","type","text","placeholder","Last Name","required","","formControlName","lastName"],[1,"datepicker-group"],["nbInput","","placeholder","Start Date","formControlName","startDate",3,"nbDatepicker"],["format","dd/MM/yyyy"],["nbInput","","placeholder","End Date","formControlName","finishDate",3,"nbDatepicker"],["nbInput","","type","text","placeholder","Type Document","formControlName","typeDocument"],["nbInput","","type","number","placeholder","Salary Hours","formControlName","salaryHours"],["nbInput","","type","text","placeholder","Document","formControlName","document"],[1,"button-container"],["nbButton","","hero","","status","success","type","submit"],["nbButton","","hero","","status","danger","type","button",3,"click"]],template:function(r,u){if(r&1){let f=Y();t(0,"nb-card")(1,"nb-card-body"),s(2,"app-modal-header",2),t(3,"form",3),D("ngSubmit",function(){return A(f),V(u.onSubmit())}),t(4,"div",4),s(5,"input",5)(6,"input",6)(7,"input",7),t(8,"div",8),s(9,"input",9)(10,"nb-datepicker",10,0),e(),t(12,"div",8),s(13,"input",11)(14,"nb-datepicker",10,1),e(),s(16,"input",12)(17,"input",13)(18,"input",14),e(),t(19,"app-modal-footer",15)(20,"button",16),n(21,"Save"),e(),t(22,"button",17),D("click",function(){return A(f),V(u.closeDialog())}),n(23,"Cancel"),e()()()()()}if(r&2){let f=q(11),y=q(15);l(2),m("title","Employee Detail"),l(),m("formGroup",u.formData),l(6),m("nbDatepicker",f),l(4),m("nbDatepicker",y)}},dependencies:[v,Z,h,F,se,ae,w,R,T,O,I,g,le,me,S,C,ee,_,x,te,E,M,re,ne,Ne,U,be,fe,ve,he],styles:[".form-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:16px;padding:16px;max-width:600px;margin:auto}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column}.button-container[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:12px;margin-top:16px}"]})};function Te(i,a){i&1&&(t(0,"span"),n(1,"El campo es obligatorio."),e())}function Be(i,a){i&1&&(t(0,"span"),n(1,"Debe tener al menos 4 caracteres."),e())}function Pe(i,a){i&1&&(t(0,"span"),n(1,"M\xE1ximo 50 caracteres."),e())}function Ue(i,a){if(i&1&&(t(0,"div",27),c(1,Te,2,0,"span",28)(2,Be,2,0,"span",28)(3,Pe,2,0,"span",28),e()),i&2){let o=N();l(),m("ngIf",o.f.name.errors==null?null:o.f.name.errors.required),l(),m("ngIf",o.f.name.errors==null?null:o.f.name.errors.minlength),l(),m("ngIf",o.f.name.errors==null?null:o.f.name.errors.maxlength)}}function ke(i,a){i&1&&(t(0,"span"),n(1,"El campo es obligatorio."),e())}function Ae(i,a){i&1&&(t(0,"span"),n(1,"M\xEDnimo 8 caracteres."),e())}function Ve(i,a){if(i&1&&(t(0,"div",27),c(1,ke,2,0,"span",28)(2,Ae,2,0,"span",28),e()),i&2){let o=N();l(),m("ngIf",o.f.password.errors==null?null:o.f.password.errors.required),l(),m("ngIf",o.f.password.errors==null?null:o.f.password.errors.minlength)}}function qe(i,a){i&1&&(t(0,"span"),n(1,"El campo es obligatorio."),e())}function je(i,a){i&1&&(t(0,"span"),n(1,"M\xEDnimo 8 caracteres."),e())}function Ge(i,a){if(i&1&&(t(0,"div",27),c(1,qe,2,0,"span",28)(2,je,2,0,"span",28),e()),i&2){let o=N();l(),m("ngIf",o.f.repeatpassword.errors==null?null:o.f.repeatpassword.errors.required),l(),m("ngIf",o.f.repeatpassword.errors==null?null:o.f.repeatpassword.errors.minlength)}}function We(i,a){i&1&&(t(0,"span"),n(1,"El email es obligatorio."),e())}function ze(i,a){if(i&1&&(t(0,"div",27),c(1,We,2,0,"span",28),e()),i&2){let o=N();l(),m("ngIf",o.f.email.errors==null?null:o.f.email.errors.required)}}function Le(i,a){if(i&1&&(t(0,"nb-option",29),n(1),e()),i&2){let o=a.$implicit;m("value",o),l(),K(o.name)}}function He(i,a){i&1&&(t(0,"div",27)(1,"span"),n(2,"Debe seleccionar al menos un rol"),e()())}var Me=class i{constructor(a,o,r,u,f){this.formBuilder=a;this.userRepository=o;this.modalRepository=r;this.dialogService=u;this.dialog=f}loginForm;availableRoles=[];selectedItemType;ngOnInit(){this.initForm(),this.availableRoles=[{id:"68523aef733e164697be6f59",name:"DEV",active:!0,description:"Desarrollador de software",permissionIds:[]},{id:"68523aef733e164697be6f5a",name:"QA",active:!0,description:"Especialista en calidad",permissionIds:[]},{id:"68523aef733e164697be6f5b",name:"DEVOPS",active:!0,description:"DevOps",permissionIds:[]},{id:"68523aef733e164697be6f5c",name:"ANALYST",active:!0,description:"Analista",permissionIds:[]},{id:"68523aef733e164697be6f5d",name:"SUPPORT",active:!0,description:"Soporte t\xE9cnico",permissionIds:[]},{id:"68523aef733e164697be6f5e",name:"MANAGER",active:!0,description:"Gerente",permissionIds:[]},{id:"68523aef733e164697be6f5f",name:"ANONYMOUS",active:!0,description:"Acceso p\xFAblico",permissionIds:[]},{id:"68523aef733e164697be6f57",name:"ADMIN",active:!0,description:"Administrador con acceso total",permissionIds:[]},{id:"68523aef733e164697be6f58",name:"USER",active:!0,description:"suario est\xE1ndar del sistema",permissionIds:[]}],this.loginForm.patchValue({name:"zarmir",lastName:"pillihuaman hurtado",password:"............",repeatpassword:"............",numTypeDocument:"12345678",typeDocument:"DNI",email:"pillihuamanhz@gmail.com",phoneNumber:"999999999",alias:"zarmir",userName:"zarmirph",code:1001,estatus:!0,roles:[this.availableRoles[0]]})}initForm(){this.loginForm=this.formBuilder.group({name:this.formBuilder.control("",[d.required]),lastName:this.formBuilder.control(""),password:this.formBuilder.control("",[d.required,d.minLength(8)]),repeatpassword:this.formBuilder.control("",[d.required,d.minLength(8)]),numTypeDocument:this.formBuilder.control(""),typeDocument:this.formBuilder.control(""),email:this.formBuilder.control("",[d.required]),phoneNumber:this.formBuilder.control(""),alias:this.formBuilder.control(""),userName:this.formBuilder.control(""),code:this.formBuilder.control(0),estatus:this.formBuilder.control(!0),roles:this.formBuilder.control([],d.required)})}get f(){return this.loginForm.controls}submit(){if(this.loginForm.invalid)return;let a={name:this.f.name.value,lastName:this.f.lastName.value,password:this.f.password.value,repeatpassword:this.f.repeatpassword.value,numTypeDocument:this.f.numTypeDocument.value,typeDocument:this.f.typeDocument.value,email:this.f.email.value,phoneNumber:this.f.phoneNumber.value,alias:this.f.alias.value,userName:this.f.userName.value,code:this.f.code.value,estatus:this.f.estatus.value,roles:this.f.roles.value};debugger;this.userRepository.registerUser(a).subscribe(()=>this.dialog.open(G,{data:W.datamodelSucess}),()=>this.dialog.open(G,{data:W.datamodelError}))}onNewClick(){this.dialogService.open(k,{closeOnBackdropClick:!1,hasBackdrop:!0}).onClose.subscribe(a=>console.log("Dialog closed",a))}static \u0275fac=function(o){return new(o||i)(p(oe),p(_e),p(P),p(B),p(ge))};static \u0275cmp=b({type:i,selectors:[["app-user-register"]],decls:64,vars:8,consts:[[3,"formGroup"],[1,"container"],[1,"flex-container","row"],[1,"col-12","col-sm-6"],["for","name",1,"form-label"],["type","text","nbInput","","fullWidth","","status","basic","placeholder","Nombre","formControlName","name"],["class","invalid-text",4,"ngIf"],["for","lastName",1,"form-label"],["type","text","nbInput","","fullWidth","","status","basic","placeholder","Apellido","formControlName","lastName"],[1,"form-label"],["placeholder","Tipo de documento","formControlName","typeDocument"],["value","1"],["value","2"],["value","3"],["value","4"],["type","text","nbInput","","fullWidth","","status","basic","placeholder","N\xFAmero de documento","formControlName","numTypeDocument"],["type","password","nbInput","","fullWidth","","status","basic","placeholder","Contrase\xF1a","formControlName","password"],["type","password","nbInput","","fullWidth","","status","basic","placeholder","Repetir contrase\xF1a","formControlName","repeatpassword"],["type","text","nbInput","","fullWidth","","status","basic","placeholder","Tel\xE9fono","formControlName","phoneNumber"],["type","email","nbInput","","fullWidth","","status","basic","placeholder","Email","formControlName","email"],["type","text","nbInput","","fullWidth","","status","basic","placeholder","Alias","formControlName","alias"],["type","text","nbInput","","fullWidth","","status","basic","placeholder","Usuario","formControlName","userName"],[1,"col-12","col-sm-12"],["formControlName","roles","placeholder","Seleccionar roles","multiple","","fullWidth",""],[3,"value",4,"ngFor","ngForOf"],[1,"btntype","mt-4"],["type","submit",1,"btn","btn-primary",3,"click","disabled"],[1,"invalid-text"],[4,"ngIf"],[3,"value"]],template:function(o,r){o&1&&(t(0,"form",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"label",4),n(5,"Nombre *"),e(),s(6,"input",5),c(7,Ue,4,3,"div",6),e(),t(8,"div",3)(9,"label",7),n(10,"Apellido"),e(),s(11,"input",8),e(),t(12,"div",3)(13,"label",9),n(14,"Tipo de documento *"),e(),t(15,"nb-select",10)(16,"nb-option",11),n(17,"DNI"),e(),t(18,"nb-option",12),n(19,"Pasaporte"),e(),t(20,"nb-option",13),n(21,"Documento Local"),e(),t(22,"nb-option",14),n(23,"Licencia"),e()()(),t(24,"div",3)(25,"label",9),n(26,"Nro de documento *"),e(),s(27,"input",15),e(),t(28,"div",3)(29,"label",9),n(30,"Contrase\xF1a *"),e(),s(31,"input",16),c(32,Ve,3,2,"div",6),e(),t(33,"div",3)(34,"label",9),n(35,"Repetir Contrase\xF1a *"),e(),s(36,"input",17),c(37,Ge,3,2,"div",6),e(),t(38,"div",3)(39,"label",9),n(40,"Tel\xE9fono"),e(),s(41,"input",18),e(),t(42,"div",3)(43,"label",9),n(44,"Email *"),e(),s(45,"input",19),c(46,ze,2,1,"div",6),e(),t(47,"div",3)(48,"label",9),n(49,"Alias"),e(),s(50,"input",20),e(),t(51,"div",3)(52,"label",9),n(53,"Usuario"),e(),s(54,"input",21),e(),t(55,"div",22)(56,"label",9),n(57,"Roles *"),e(),t(58,"nb-select",23),c(59,Le,2,2,"nb-option",24),e(),c(60,He,3,0,"div",6),e()(),t(61,"div",25)(62,"button",26),D("click",function(){return r.submit()}),n(63," Registrar Usuario "),e()()()()),o&2&&(m("formGroup",r.loginForm),l(7),m("ngIf",r.f.name.invalid&&r.f.name.touched),l(25),m("ngIf",r.f.password.invalid&&r.f.password.touched),l(5),m("ngIf",r.f.repeatpassword.invalid&&r.f.repeatpassword.touched),l(9),m("ngIf",r.f.email.invalid&&r.f.email.touched),l(13),m("ngForOf",r.availableRoles),l(),m("ngIf",r.f.roles.invalid&&r.f.roles.touched),l(2),m("disabled",r.loginForm.invalid))},dependencies:[v,$,J,g,O,ce,de,S,C,_,x,E,M,T,ue,h],styles:[".container[_ngcontent-%COMP%]{padding:1rem 2rem}.flex-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:1rem}.form-label[_ngcontent-%COMP%]{font-weight:600;margin-bottom:.3rem;display:inline-block}.invalid-text[_ngcontent-%COMP%]{color:#e53935;font-size:.8rem;margin-top:.2rem;display:block}.invalid-text[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block}.nb-select[_ngcontent-%COMP%]{width:100%}.btntype[_ngcontent-%COMP%]{margin-top:2rem;display:flex;justify-content:flex-end}.btntype[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{min-width:160px;font-weight:700}@media screen and (max-width: 768px){.col-sm-6[_ngcontent-%COMP%], .col-sm-12[_ngcontent-%COMP%]{flex:0 0 100%;max-width:100%}.btntype[_ngcontent-%COMP%]{justify-content:center}}"]})};export{Me as UserRegisterComponent};
