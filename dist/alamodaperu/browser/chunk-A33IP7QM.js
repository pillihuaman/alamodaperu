import{a as W}from"./chunk-Q6BP24XQ.js";import{a as $}from"./chunk-DEYWHEGI.js";import"./chunk-UD265RQP.js";import"./chunk-GGVMM4CI.js";import"./chunk-SM2U5EFL.js";import{j as J}from"./chunk-IWN3UE4Q.js";import{$b as O,Aa as g,Da as f,Dd as L,Ed as Q,Fa as u,Ga as p,Gb as B,Hb as T,Jb as V,Ka as C,Kb as M,La as b,Ma as x,Nd as X,O as c,Oa as m,Ob as E,P as d,Qa as F,Rb as N,Td as q,Ub as D,Ud as H,ba as h,bc as k,cc as U,da as s,ed as A,ha as _,hb as S,ib as R,jd as z,ka as I,kd as j,ld as G,nb as w,oa as y,ra as l,se as K,ya as a,za as n}from"./chunk-SX3YOEL3.js";var Z=["inputFile"];function ee(r,i){if(r&1&&(a(0,"nb-option",21),m(1),n()),r&2){let e=i.$implicit;l("value",e.idProduct),s(),F(" ",e.name," ")}}function te(r,i){if(r&1){let e=f();a(0,"div",22)(1,"label",23),u("click",function(){c(e);let t=p();return d(t.close(1))}),m(2,"X"),n(),g(3,"img",24),n()}if(r&2){let e=p();s(3),l("src",e.filePath1,h)("alt",e.myForm.value.name)}}function ie(r,i){if(r&1){let e=f();a(0,"div",22)(1,"label",23),u("click",function(){c(e);let t=p();return d(t.close(2))}),m(2,"X"),n(),g(3,"img",24),n()}if(r&2){let e=p();s(3),l("src",e.filePath2,h)("alt",e.myForm.value.name)}}function ne(r,i){if(r&1){let e=f();a(0,"div",22)(1,"label",23),u("click",function(){c(e);let t=p();return d(t.close(3))}),m(2,"X"),n(),g(3,"img",24),n()}if(r&2){let e=p();s(3),l("src",e.filePath3,h)("alt",e.myForm.value.name)}}function oe(r,i){if(r&1){let e=f();a(0,"div",22)(1,"label",23),u("click",function(){c(e);let t=p();return d(t.close(4))}),m(2,"X"),n(),g(3,"img",24),n()}if(r&2){let e=p();s(3),l("src",e.filePath4,h)("alt",e.myForm.value.name)}}var Y=class r{constructor(i,e,o){this.imagenTempService=i;this.fb=e;this.authenticationService=o;this.myForm=this.fb.group({img:[null],filename:[""],name:[""],description:[""],idProduct:[""]})}listProductByUser=[];listImagenTemp=[{urlImagen:"http://localhost:8087/v1/imagen/getImagen?codImagen=6342acc01413e6298e29ef98"}];idTempUnique="";imagenTem;uuidValue;count=0;base64File;selectImagen;filePath1;filePath2;filePath3;filePath4;img1;img2;img3;img4;myForm;lstfilePath=[];idProductSelect;inputFile={};ngOnInit(){let i=this.authenticationService.getCurrentUserValue;if(!i?.rolId){console.error("No user is logged in.");return}let e={idHeadImagen:i.rolId};this.imagenTempService.listProdutByUser(e).subscribe(o=>{this.listProductByUser=o.payload})}loadFile(i){this.count++;let e=i.target.files;this.selectImagen=i.target.files[0];let o={file:this.selectImagen};if(this.myForm?.patchValue({img:e}),this.myForm?.get("img")?.updateValueAndValidity(),this.filePath1===void 0){let t=new FileReader;t.onload=()=>{this.filePath1=t.result,this.img1={name:this.selectImagen?.name,value:this.filePath1,index:0}},t.readAsDataURL(this.selectImagen)}else if(this.filePath2===void 0){let t=new FileReader;t.onload=()=>{this.filePath2=t.result,this.img2={name:this.selectImagen?.name,value:this.filePath2,index:1}},t.readAsDataURL(this.selectImagen)}else if(this.filePath3===void 0){let t=new FileReader;t.onload=()=>{this.filePath3=t.result,this.img3={name:this.selectImagen?.name,value:this.filePath3,index:2}},t.readAsDataURL(this.selectImagen)}else if(this.filePath4===void 0){let t=new FileReader;t.onload=()=>{this.filePath4=t.result,this.img4={name:this.selectImagen?.name,value:this.filePath4,index:3}},t.readAsDataURL(this.selectImagen)}}close(i){i===1?this.filePath1=void 0:i===2&&(this.filePath2=void 0),i===3&&(this.filePath3=void 0),i===4&&(this.filePath4=void 0),this.inputFile.nativeElement.value=null}save(){if(this.lstfilePath=[],this.filePath1&&this.filePath1!==""&&(this.lstfilePath?.push(this.img1),console.log(this.img1)),this.filePath2&&this.filePath2!==""&&this.lstfilePath?.push(this.img2),this.filePath3&&this.filePath3!==""&&this.lstfilePath?.push(this.img3),this.filePath4&&this.filePath4!==""&&this.lstfilePath?.push(this.img4),this.lstfilePath&&this.lstfilePath.length>0){let i={count:this.count,name:this.myForm.get("name")?.value,description:this.myForm.get("description")?.value,uniqueKeyHash:"",idProduct:this.idProductSelect,listImagen:this.lstfilePath};this.imagenTempService.registerImagenTemp(i).subscribe(e=>{},e=>{})}}changeProduct(i){this.idProductSelect=i}static \u0275fac=function(e){return new(e||r)(_(W),_(O),_($))};static \u0275cmp=I({type:r,selectors:[["app-register-image-by-product"]],viewQuery:function(e,o){if(e&1&&C(Z,5),e&2){let t;b(t=x())&&(o.inputFile=t.first)}},decls:34,vars:6,consts:[["inputFile",""],[3,"formGroup"],[1,"form-row"],[1,"container"],["for","productSelect"],[1,"form-group","paddingObject","col-sm-4"],["placeholder","Product","formControlName","idProduct",3,"selectedChange"],[3,"value",4,"ngFor","ngForOf"],["for","nameInput"],["nbInput","","type","text","formControlName","name"],["for","descriptionInput"],["nbInput","","formControlName","description","cols","30","rows","5"],["class","foto-editor-item buttonCloseMain",4,"ngIf"],[1,"mb-3"],["for","formFileSm",1,"form-label"],["enctype","multipart/form-data","id","formFileSm","type","file","accept","image/*",1,"form-control","form-control-sm",3,"change"],[1,"form-group","paddingObject"],[1,"col-sm-10"],["nbButton","","status","primary",3,"click"],[1,"col-sm-2"],["nbButton","","status","success",3,"click"],[3,"value"],[1,"foto-editor-item","buttonCloseMain"],[1,"buttonClose",3,"click"],[1,"tempImagen",3,"src","alt"]],template:function(e,o){if(e&1){let t=f();a(0,"form",1)(1,"div",2)(2,"div",3)(3,"label",4),m(4,"*Product"),n(),a(5,"div",5)(6,"nb-select",6),u("selectedChange",function(v){return c(t),d(o.changeProduct(v))}),y(7,ee,2,2,"nb-option",7),n()()(),a(8,"div",3)(9,"div",5)(10,"label",8),m(11,"Name"),n(),g(12,"input",9),n()(),a(13,"div",3)(14,"div",5)(15,"label",10),m(16,"Description"),n(),g(17,"textarea",11),n()(),y(18,te,4,2,"div",12)(19,ie,4,2,"div",12)(20,ne,4,2,"div",12)(21,oe,4,2,"div",12),n(),a(22,"div",13)(23,"label",14),m(24,"Attach Image"),n(),a(25,"input",15,0),u("change",function(v){return c(t),d(o.loadFile(v))}),n()(),a(27,"div",16)(28,"div",17)(29,"button",18),u("click",function(){return c(t),d(o.save())}),m(30,"Register"),n()(),a(31,"div",19)(32,"button",20),u("click",function(){return c(t),d(o.save())}),m(33,"Stock"),n()()()()}e&2&&(l("formGroup",o.myForm),s(7),l("ngForOf",o.listProductByUser),s(11),l("ngIf",o.filePath1),s(),l("ngIf",o.filePath2),s(),l("ngIf",o.filePath3),s(),l("ngIf",o.filePath4))},dependencies:[w,S,R,U,E,T,V,M,N,D,J,X,B,G,j,z,Q,L,A,K,H,q,k],styles:[".tempImagen[_ngcontent-%COMP%]{width:100%;max-height:100%;border-radius:15px}.foto-editor[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly}.foto-editor-item[_ngcontent-%COMP%]{font-size:4em;text-align:center}.foto-editor[_ngcontent-%COMP%] > .foto-editor-item[_ngcontent-%COMP%]:nth-child(2){color:#ff69b4}@media only screen and (max-width: 800px){.foto-editor[_ngcontent-%COMP%]{flex-direction:column;align-items:center}}.buttonCloseMain[_ngcontent-%COMP%]{font-size:x-large;position:relative}.buttonClose[_ngcontent-%COMP%]{font-size:x-large;position:absolute;top:0%;left:93%;color:red}.contener[_ngcontent-%COMP%]{padding:12px}"]})};export{Y as RegisterImageByProductComponent};
