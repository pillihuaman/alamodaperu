import{a as ce}from"./chunk-K5HXVKPS.js";import{a as de}from"./chunk-C4MTUD5M.js";import{a as ue}from"./chunk-X3J7YRVF.js";import{Ab as C,Ba as B,Bb as G,Ca as H,Cb as U,Dd as pe,Ed as me,Gb as K,Ha as w,Hb as L,I as R,Ia as D,Ib as z,J as _,Ja as T,Kb as J,Ob as Q,P as M,Qb as W,Qc as Z,Rc as f,Sb as X,Sc as $,Tb as Y,Tc as v,Vc as y,Vd as se,Wc as ee,Wd as E,X as O,Xc as N,Y as l,Yc as b,Yd as le,Zc as te,Zd as h,_c as oe,a as k,b as P,ba as m,db as V,ea as d,fb as u,fd as ne,id as ie,jd as re,la as g,qd as S,sa as i,ta as r,ua as a,wd as ae,xa as q,yb as A,za as c,zb as j}from"./chunk-HKEP7HVR.js";var x=class s{constructor(o){this.dialogRef=o}title="";close=new M;onEscPressed(o){this.closeModal()}closeModal(){this.dialogRef?this.dialogRef.close():this.close.emit()}static \u0275fac=function(e){return new(e||s)(m(S,8))};static \u0275cmp=d({type:s,selectors:[["app-modal-header"]],hostBindings:function(e,t){e&1&&c("keydown.escape",function(p){return t.onEscPressed(p)},!1,O)},inputs:{title:"title"},outputs:{close:"close"},decls:7,vars:1,consts:[[1,"custom-modal","no-border"],[1,"modal-header"],["nbButton","","ghost","","nbTooltip","Close",3,"click"],["icon","close-outline"]],template:function(e,t){e&1&&(i(0,"nb-card",0)(1,"nb-card-header",1)(2,"h3"),D(3),r(),i(4,"button",2),c("click",function(){return t.closeModal()}),a(5,"nb-icon",3),r()()(),a(6,"hr")),e&2&&(l(3),T(t.title))},dependencies:[u,b,N,f,Z,h,y,$,ae],styles:['@charset "UTF-8";.no-border[_ngcontent-%COMP%]{border:none!important;box-shadow:none!important;background:transparent!important}.modal-header[_ngcontent-%COMP%]{border-bottom:none!important;background:transparent!important;display:flex;justify-content:space-between;align-items:center;padding:4px 8px}.modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1rem;margin:0}.modal-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:none;background:transparent;cursor:pointer;padding:2px}.custom-modal[_ngcontent-%COMP%]{width:500px;max-width:90vw;height:auto;max-height:80vh;overflow:auto;padding:10px;background:var(--nb-background-basic);border-radius:6px}@media (max-width: 768px){.custom-modal[_ngcontent-%COMP%]{width:85vw;padding:8px}}@media (max-width: 480px){.custom-modal[_ngcontent-%COMP%]{width:95vw;padding:5px}}']})};var De=["*"],F=class s{static \u0275fac=function(e){return new(e||s)};static \u0275cmp=d({type:s,selectors:[["app-modal-footer"]],ngContentSelectors:De,decls:4,vars:0,consts:[[1,"modal-footer-card","no-border"],[1,"modal-footer","no-border"]],template:function(e,t){e&1&&(B(),a(0,"hr"),i(1,"nb-card",0)(2,"nb-card-body",1),H(3),r()())},dependencies:[u,b,f,h,y,v],styles:[".modal-footer-card[_ngcontent-%COMP%]{background:transparent;box-shadow:none;border-top:1px solid var(--nb-border-basic);padding:1rem;display:flex;justify-content:flex-end;align-items:center}.modal-footer[_ngcontent-%COMP%]{display:flex;gap:10px}.modal-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:100px}.no-border[_ngcontent-%COMP%]{border:none!important;box-shadow:none!important;background:transparent!important}"]})};var he=class s{constructor(o,e,t,n,p,I){this.fb=o;this.spinnerService=e;this.datePipe=t;this.supportService=n;this.modalRepository=p;this.dialogRef=I}employeRequestForm;employeeData;employeeUpdated=new M;ngOnInit(){this.buildForm(),this.employeeData&&this.patchFormValues(),window.addEventListener("keydown",this.handleEscKey.bind(this))}patchFormValues(){this.employeRequestForm.patchValue({id:this.employeeData.id||"",name:this.employeeData.name||"",lastName:this.employeeData.lastName||"",startDate:this.employeeData.startDate?E(this.employeeData.startDate+"","dd/MM/yyyy",new Date):null,finishDate:this.employeeData.finishDate?E(this.employeeData.finishDate+"","dd/MM/yyyy",new Date):null,typeDocument:this.employeeData.typeDocument||"",document:this.employeeData.document||"",salaryHours:this.employeeData.salaryHours||""}),console.log("Form Values:",this.employeRequestForm.value)}buildForm(){this.employeRequestForm=this.fb.group({id:[""],name:["",C.required],lastName:[""],startDate:["",C.required],finishDate:["",C.required],document:["",C.required],typeDocument:[""],salaryHours:[""],idToFind:[""],nameToFind:[""],lastNameToFind:[""],documentToFind:[""]})}onSubmit(){let o=this.datePipe.transform(this.employeRequestForm.value.startDate,"dd/MM/yyyy")||"",e=this.datePipe.transform(this.employeRequestForm.value.finishDate,"dd/MM/yyyy")||"",t=P(k({},this.employeRequestForm.value),{startDate:o,finishDate:e});this.spinnerService.show(),this.supportService.saveEmployee(t).subscribe({next:()=>{debugger;this.modalRepository.showToast("success","Save Success","Success"),this.employeRequestForm.reset(),this.spinnerService.hide(),this.dialogRef&&(this.employeeUpdated.emit(t),this.dialogRef.close(t),this.spinnerService.show())},error:n=>{(n.status===422||n.status===500)&&n.error?.data?.payload&&n.error.data.payload.forEach(p=>{let I=p.propertyPath,ge=p.valExceptionDescription;this.employeRequestForm.get(I)?.setErrors({invalid:!0,customError:ge})}),this.spinnerService.hide()}})}closeDialog(){this.employeRequestForm.reset(),this.dialogRef&&this.dialogRef.close()}handleEscKey(o){o.key==="Escape"&&this.closeDialog()}static \u0275fac=function(e){return new(e||s)(m(W),m(ce),m(V),m(ue),m(de),m(S,8))};static \u0275cmp=d({type:s,selectors:[["app-employee-detail"]],inputs:{employeRequestForm:"employeRequestForm",employeeData:"employeeData"},outputs:{employeeUpdated:"employeeUpdated"},decls:24,vars:4,consts:[["startDate",""],["finishDate",""],[3,"title"],[3,"ngSubmit","formGroup"],[1,"form-container"],["nbInput","","type","text","placeholder","ID","required","","formControlName","id","readonly",""],["nbInput","","type","text","placeholder","Name","required","","formControlName","name"],["nbInput","","type","text","placeholder","Last Name","required","","formControlName","lastName"],[1,"datepicker-group"],["nbInput","","placeholder","Start Date","formControlName","startDate",3,"nbDatepicker"],["format","dd/MM/yyyy"],["nbInput","","placeholder","End Date","formControlName","finishDate",3,"nbDatepicker"],["nbInput","","type","text","placeholder","Type Document","formControlName","typeDocument"],["nbInput","","type","number","placeholder","Salary Hours","formControlName","salaryHours"],["nbInput","","type","text","placeholder","Document","formControlName","document"],[1,"button-container"],["nbButton","","hero","","status","success","type","submit"],["nbButton","","hero","","status","danger","type","button",3,"click"]],template:function(e,t){if(e&1){let n=q();i(0,"nb-card")(1,"nb-card-body"),a(2,"app-modal-header",2),i(3,"form",3),c("ngSubmit",function(){return R(n),_(t.onSubmit())}),i(4,"div",4),a(5,"input",5)(6,"input",6)(7,"input",7),i(8,"div",8),a(9,"input",9)(10,"nb-datepicker",10,0),r(),i(12,"div",8),a(13,"input",11)(14,"nb-datepicker",10,1),r(),a(16,"input",12)(17,"input",13)(18,"input",14),r(),i(19,"app-modal-footer",15)(20,"button",16),D(21,"Save"),r(),i(22,"button",17),c("click",function(){return R(n),_(t.closeDialog())}),D(23,"Cancel"),r()()()()()}if(e&2){let n=w(11),p=w(15);l(2),g("title","Employee Detail"),l(),g("formGroup",t.employeRequestForm),l(6),g("nbDatepicker",n),l(4),g("nbDatepicker",p)}},dependencies:[u,A,b,N,ne,ee,y,v,re,ie,f,h,te,oe,K,j,L,G,U,Q,z,J,Y,X,x,F,me,pe,se,le],styles:[".form-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:16px;padding:16px;max-width:600px;margin:auto}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column}.button-container[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:12px;margin-top:16px}"]})};export{he as a};
