import{a as A}from"./chunk-LWBRQBKD.js";import{a as w}from"./chunk-C4MTUD5M.js";import"./chunk-X3J7YRVF.js";import"./chunk-2FA2V676.js";import"./chunk-UYLGKDWS.js";import{j as V}from"./chunk-ELOWQZB7.js";import{$a as C,Aa as u,Ab as x,Bb as M,Cb as b,Gb as N,Ia as c,Ib as q,Ja as y,Ka as _,Kb as I,Qb as T,Rc as D,Sb as O,Tb as P,Wc as G,Y as m,Yc as W,Zd as z,ab as R,ba as v,ea as S,fb as h,ia as p,jd as B,la as s,sa as i,sd as j,ta as n,ua as a,va as f,wa as g,yb as F,za as E}from"./chunk-HKEP7HVR.js";function k(t,r){if(t&1&&(f(0),i(1,"div",12),c(2),n(),g()),t&2){let e=r.$implicit;m(2),y(e)}}function H(t,r){if(t&1&&(i(0,"div")(1,"span",12),c(2),n()()),t&2){let e,o=u(2);m(2),_(" ",(e=o.systemRequestForm.get("version"))==null?null:e.getError("customError")," ")}}function J(t,r){if(t&1&&(i(0,"div",9),p(1,k,3,1,"ng-container",10)(2,H,3,1,"div",11),n()),t&2){let e,o=u();m(),s("ngForOf",o.formErrors.version),m(),s("ngIf",(e=o.systemRequestForm.get("version"))==null?null:e.hasError("customError"))}}function K(t,r){if(t&1&&(f(0),i(1,"div",12),c(2),n(),g()),t&2){let e=r.$implicit;m(2),y(e)}}function L(t,r){if(t&1&&(i(0,"div")(1,"span",12),c(2),n()()),t&2){let e,o=u(2);m(2),_(" ",(e=o.systemRequestForm.get("contactEmail"))==null?null:e.getError("customError")," ")}}function Q(t,r){if(t&1&&(i(0,"div",9),p(1,K,3,1,"ng-container",10)(2,L,3,1,"div",11),n()),t&2){let e,o=u();m(),s("ngForOf",o.formErrors.contactEmail),m(),s("ngIf",(e=o.systemRequestForm.get("contactEmail"))==null?null:e.hasError("customError"))}}var $=class t{constructor(r,e,o){this.fb=r;this.supportService=e;this.modalRepository=o}systemRequestForm;ngOnInit(){this.systemRequestForm=this.fb.group({name:["",x.required],version:[""],mainMenu:[""],timezone:[""],isActive:[""],contactEmail:[""],supportPhone:[""]})}formErrors={};onSubmit(){if(this.systemRequestForm.valid){let r={name:this.systemRequestForm.get("name")?.value,version:this.systemRequestForm.get("version")?.value,mainMenu:this.systemRequestForm.get("mainMenu")?.value,timezone:"",isActive:!0,contactEmail:this.systemRequestForm.get("contactEmail")?.value,supportPhone:this.systemRequestForm.get("supportPhone")?.value};this.supportService.saveSystem(r).subscribe(e=>{this.modalRepository.showToast("success","Save Succes","Succes"),this.systemRequestForm.reset()},e=>{(e.status===422||e.status===500)&&e.error&&e.error.data&&e.error.data.payload&&e.error.data.payload.forEach(o=>{let l=o.propertyPath,d=o.valExceptionDescription;this.systemRequestForm.get(l)?.setErrors({invalid:!0,customError:d})})})}}static \u0275fac=function(e){return new(e||t)(v(T),v(A),v(w))};static \u0275cmp=S({type:t,selectors:[["app-register-system"]],decls:15,vars:3,consts:[[3,"ngSubmit","formGroup"],[1,"container"],[1,"form-group"],["type","text","placeholder","Name","fullWidth","","formControlName","name"],["type","text","placeholder","Version","fullWidth","","formControlName","version"],["class","error-message",4,"ngIf"],["type","text","placeholder","Main Menu","fullWidth","","formControlName","mainMenu"],["type","email","placeholder","Contact Email","fullWidth","","formControlName","contactEmail"],["type","text","placeholder","Support Phone","fullWidth","","formControlName","supportPhone"],[1,"error-message"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"text-danger"]],template:function(e,o){if(e&1&&(i(0,"form",0),E("ngSubmit",function(){return o.onSubmit()}),i(1,"div",1)(2,"div",2),a(3,"nb-input",3),n(),i(4,"div",2),a(5,"nb-input",4),p(6,J,3,2,"div",5),n(),i(7,"div",2),a(8,"nb-input",6),n(),i(9,"div",2),a(10,"nb-input",7),p(11,Q,3,2,"div",5),n(),i(12,"div",2),a(13,"nb-input",8),n(),a(14,"div",2),n()()),e&2){let l,d;s("formGroup",o.systemRequestForm),m(6),s("ngIf",(l=o.systemRequestForm.get("version"))==null?null:l.invalid),m(5),s("ngIf",(d=o.systemRequestForm.get("contactEmail"))==null?null:d.invalid)}},dependencies:[h,C,R,P,N,M,b,q,I,V,j,F,W,G,B,D,z,O],styles:[".error-message[_ngcontent-%COMP%]{color:red;font-size:14px;margin-top:4px}"]})};export{$ as RegisterSystemComponent};
