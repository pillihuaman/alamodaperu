import{a as O}from"./chunk-X3J7YRVF.js";import{a as w}from"./chunk-25GHDRPW.js";import{a as N}from"./chunk-C4MTUD5M.js";import{i as D,j as M}from"./chunk-MHISBB5P.js";import{$b as _,Ba as m,Ca as s,Cb as I,Da as v,Ia as c,Ja as C,Kd as T,M as n,Ra as d,Ta as b,Z as g,cc as U,ea as u,ga as l,lb as S,mb as y,na as f,qb as F,ra as h,ua as p,ub as R}from"./chunk-KE7QE7ZJ.js";function E(o,e){if(o&1&&(m(0,"div"),v(1,"img",4),s()),o&2){let t=C();l(),p("src",t.imageUrl,u)}}function q(o,e){if(o&1&&(m(0,"div"),d(1),s()),o&2){let t=e.$implicit;l(),b(" ",t,`
`)}}var z=class o{pageRequestForm;selectedFile=null;imageUrl=null;responseBase64=null;imagen={};imagenResponse=[];base64Data={base64String:"",contentType:""};fb=n(_);supportService=n(O);modalRepository=n(N);dialog=n(D);spinnerService=n(w);http=n(R);sanitizer=n(I);zone=n(g);toastrService=n(T);ngOnInit(){this.buildForm()}buildForm(){this.pageRequestForm=this.fb.group({files:[""]})}onFileSelected(e){let t=e.target.files;this.selectedFile=t.item(0),this.selectedFile&&this.readFileContent(this.selectedFile).then(i=>{this.base64Data=i})}readFileContent(e){return new Promise((t,i)=>{let r=new FileReader;r.onload=()=>{let a=r.result,x=a.split(";")[0].split(":")[1];t({base64String:a,contentType:x})},r.onerror=a=>i(a),r.readAsDataURL(e)})}displayImage(e){let t=atob(e),i=new Uint8Array([...t].map(a=>a.charCodeAt(0))),r=new Blob([i],{type:"image/png"});this.zone.run(()=>{this.imageUrl=this.sanitizer.bypassSecurityTrustUrl(URL.createObjectURL(r))})}onSubmit(){this.pageRequestForm.valid&&(this.spinnerService.show(),this.imagen.file=this.base64Data.base64String,this.imagen.contentType=this.base64Data.contentType,this.imagen.name=this.selectedFile?.name||"Untitled",this.supportService.changeColorImagen(this.imagen).subscribe(e=>{this.modalRepository.showToast("success","Save Success","Success"),this.pageRequestForm.reset(),this.imagenResponse=e.payload.colorsCode,this.displayImage(e.payload.base64Image),this.spinnerService.hide()},e=>{this.spinnerService.hide()}))}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=f({type:o,selectors:[["app-create-randon-imagen-color"]],decls:6,vars:2,consts:[["type","file",3,"change"],[3,"click"],[4,"ngIf"],[4,"ngFor","ngForOf"],["alt","Uploaded Image",3,"src"]],template:function(t,i){t&1&&(m(0,"div")(1,"input",0),c("change",function(a){return i.onFileSelected(a)}),s(),m(2,"button",1),c("click",function(){return i.onSubmit()}),d(3,"Upload"),s(),h(4,E,2,1,"div",2)(5,q,2,1,"div",3),s()),t&2&&(l(4),p("ngIf",i.imageUrl),l(),p("ngForOf",i.imagenResponse))},dependencies:[F,S,y,U,M],encapsulation:2})};export{z as CreateRandonImagenColorComponent};
