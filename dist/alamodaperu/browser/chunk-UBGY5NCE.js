import{a as Q}from"./chunk-R6IASW6H.js";import{a as K}from"./chunk-YZLXWSIR.js";import"./chunk-GJEU6FZM.js";import{a as J}from"./chunk-IGSJ74VS.js";import"./chunk-J4WYP6TI.js";import{a as z}from"./chunk-VVXZNI42.js";import{a as P}from"./chunk-C4MTUD5M.js";import"./chunk-SM2U5EFL.js";import{$b as I,Ce as W,Da as i,Ea as r,Fa as v,Fe as L,Ge as H,Ib as h,Id as O,Ka as m,Kb as N,Md as w,Nb as S,Nd as A,Ob as T,Qb as C,Rb as D,Ta as a,Vb as R,Xd as V,Yb as g,a as l,gc as M,ha as d,he as q,ic as y,ie as U,jc as F,la as n,ld as k,md as x,nd as E,oa as u,pd as _,qd as B,rd as j,sa as c,sd as G,ub as b,wa as f}from"./chunk-V3AJZABF.js";var X=class s extends J{constructor(e,t,o,p,$,Y,ee){super(e,t,Y);this.fb=o;this.tenantRepository=p;this.router=$;this.activatedRoute=ee}tenantForm;ngOnInit(){this.tenantForm=this.fb.group({id:[""],name:[""],domain:[""],active:[!0]}),this.loadTenantData()}loadTenantData(){let e=this.activatedRoute.snapshot.paramMap.get("id");if(e&&K.isValidObjectId(e)){let t={id:e,name:"",domain:"",active:!0};this.spinnerService.show(),this.tenantRepository.listTenants(t).subscribe({next:o=>{let p=o.length>0?o[0]:null;p?this.tenantForm.patchValue(p):console.warn("Tenant no encontrado"),this.spinnerService.hide()},error:()=>{this.spinnerService.hide(),this.handleErrorResponseSaveOrUpdate("Error al cargar el Tenant")}})}}saveTenant(){let e=l({},this.tenantForm.value);this.tenantRepository.saveTenant(e).subscribe({next:()=>{this.showSuccessMessage("Tenant guardado correctamente","\xC9xito"),this.router.navigate(["/support/tenant"])},error:()=>{this.handleErrorResponseSaveOrUpdate("Error al guardar Tenant")}})}returnToList(){this.router.navigate(["/support/tenant"])}static \u0275fac=function(t){return new(t||s)(n(P),n(z),n(M),n(Q),n(N),n(V),n(h))};static \u0275cmp=u({type:s,selectors:[["app-support-tenant-detail"]],features:[c],decls:18,vars:1,consts:[[3,"formGroup"],[1,"form-grid"],["nbInput","","fullWidth","","placeholder","ID","formControlName","id","readonly",""],["nbInput","","fullWidth","","placeholder","Nombre","formControlName","name"],["nbInput","","fullWidth","","placeholder","Dominio","formControlName","domain"],["formControlName","active"],[1,"button-container"],["nbButton","","status","primary",3,"click"],["nbButton","","status","danger",3,"click"]],template:function(t,o){t&1&&(i(0,"p"),a(1,"support-tenant-detail works!"),r(),i(2,"nb-card")(3,"nb-card-header"),a(4,"Tenant Detail"),r(),i(5,"nb-card-body")(6,"form",0)(7,"div",1),v(8,"input",2)(9,"input",3)(10,"input",4),r(),i(11,"nb-checkbox",5),a(12,"Activo"),r(),i(13,"div",6)(14,"button",7),m("click",function(){return o.saveTenant()}),a(15,"Guardar"),r(),i(16,"button",8),m("click",function(){return o.returnToList()}),a(17,"Volver"),r()()()()()),t&2&&(d(6),f("formGroup",o.tenantForm))},dependencies:[b,S,G,j,B,_,E,x,A,w,k,H,O,R,T,C,D,g,I,F,y,U,q,W,L],encapsulation:2})};export{X as SupportTenantDetailComponent};
